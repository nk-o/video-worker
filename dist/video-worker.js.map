{"version":3,"file":"video-worker.js","sources":["../src/defaults.js","../src/utils/extend.js","../src/base-class.js","../src/utils/global.js","../src/utils/deferred.js","../src/providers/youtube.js","../src/providers/vimeo.js","../src/providers/local.js","../src/video-worker.js"],"sourcesContent":["export default {\n  autoplay: false,\n  loop: false,\n  mute: false,\n  volume: 100,\n  showControls: true,\n  accessibilityHidden: false,\n\n  // start / end video time in seconds\n  startTime: 0,\n  endTime: 0,\n};\n","/**\n * Extend like jQuery.extend\n *\n * @param {Object} out - output object.\n * @param {...any} args - additional objects to extend.\n *\n * @returns {Object}\n */\nexport default function extend(out, ...args) {\n  out = out || {};\n\n  Object.keys(args).forEach((i) => {\n    if (!args[i]) {\n      return;\n    }\n    Object.keys(args[i]).forEach((key) => {\n      out[key] = args[i][key];\n    });\n  });\n\n  return out;\n}\n","import defaults from './defaults';\nimport extend from './utils/extend';\n\nlet ID = 0;\n\nclass VideoWorkerBase {\n  type = 'none';\n\n  constructor(url, options) {\n    const self = this;\n\n    self.url = url;\n\n    self.options_default = { ...defaults };\n\n    self.options = extend({}, self.options_default, options);\n\n    // check URL\n    self.videoID = self.constructor.parseURL(url);\n\n    // init\n    if (self.videoID) {\n      self.init();\n    }\n  }\n\n  isValid() {\n    return !!this.videoID;\n  }\n\n  init() {\n    const self = this;\n\n    self.ID = ID;\n    ID += 1;\n\n    self.playerID = `VideoWorker-${self.ID}`;\n  }\n\n  // events\n  on(name, callback) {\n    this.userEventsList = this.userEventsList || [];\n\n    // add new callback in events list\n    (this.userEventsList[name] || (this.userEventsList[name] = [])).push(callback);\n  }\n\n  off(name, callback) {\n    if (!this.userEventsList || !this.userEventsList[name]) {\n      return;\n    }\n\n    if (!callback) {\n      delete this.userEventsList[name];\n    } else {\n      this.userEventsList[name].forEach((val, key) => {\n        if (val === callback) {\n          this.userEventsList[name][key] = false;\n        }\n      });\n    }\n  }\n\n  fire(name, ...args) {\n    if (this.userEventsList && typeof this.userEventsList[name] !== 'undefined') {\n      this.userEventsList[name].forEach((val) => {\n        // call with all arguments\n        if (val) {\n          val.apply(this, args);\n        }\n      });\n    }\n  }\n\n  /**\n   * Methods used in providers.\n   */\n  /* eslint-disable */\n  static parseURL(url) {\n    return false;\n  }\n  play(start) {}\n  pause() {}\n  mute() {}\n  unmute() {}\n  setVolume(volume = false) {}\n  getVolume(callback) {}\n  getMuted(callback) {}\n  setCurrentTime(currentTime = false) {}\n  getCurrentTime(callback) {}\n  getImageURL(callback) {}\n  getVideo(callback) {}\n  /* eslint-enable */\n}\n\nexport default VideoWorkerBase;\n","/* eslint-disable import/no-mutable-exports */\n/* eslint-disable no-restricted-globals */\nlet win;\n\nif (typeof window !== 'undefined') {\n  win = window;\n} else if (typeof global !== 'undefined') {\n  win = global;\n} else if (typeof self !== 'undefined') {\n  win = self;\n} else {\n  win = {};\n}\n\nexport default win;\n","// Deferred\n// thanks http://stackoverflow.com/questions/18096715/implement-deferred-object-without-using-jquery\nfunction Deferred() {\n  this.doneCallbacks = [];\n  this.failCallbacks = [];\n}\n\nDeferred.prototype = {\n  execute(list, args) {\n    let i = list.length;\n    // eslint-disable-next-line no-param-reassign\n    args = Array.prototype.slice.call(args);\n\n    while (i) {\n      i -= 1;\n      list[i].apply(null, args);\n    }\n  },\n  resolve(...args) {\n    this.execute(this.doneCallbacks, args);\n  },\n  reject(...args) {\n    this.execute(this.failCallbacks, args);\n  },\n  done(callback) {\n    this.doneCallbacks.push(callback);\n  },\n  fail(callback) {\n    this.failCallbacks.push(callback);\n  },\n};\n\nexport default Deferred;\n","import BaseClass from '../base-class';\nimport global from '../utils/global';\nimport Deferred from '../utils/deferred';\n\nlet YoutubeAPIadded = 0;\nlet loadingYoutubePlayer = 0;\nconst loadingYoutubeDefer = new Deferred();\n\nfunction loadAPI() {\n  if (YoutubeAPIadded) {\n    return;\n  }\n\n  YoutubeAPIadded = true;\n\n  const src = 'https://www.youtube.com/iframe_api';\n\n  if (!src) {\n    return;\n  }\n\n  // add script in head section\n  let tag = document.createElement('script');\n  let head = document.getElementsByTagName('head')[0];\n  tag.src = src;\n\n  head.appendChild(tag);\n\n  head = null;\n  tag = null;\n}\n\nfunction onAPIready(callback) {\n  // Listen for global YT player callback\n  if ((typeof global.YT === 'undefined' || global.YT.loaded === 0) && !loadingYoutubePlayer) {\n    // Prevents Ready event from being called twice\n    loadingYoutubePlayer = 1;\n\n    // Creates deferred so, other players know when to wait.\n    global.onYouTubeIframeAPIReady = function () {\n      global.onYouTubeIframeAPIReady = null;\n      loadingYoutubeDefer.resolve('done');\n      callback();\n    };\n  } else if (typeof global.YT === 'object' && global.YT.loaded === 1) {\n    callback();\n  } else {\n    loadingYoutubeDefer.done(() => {\n      callback();\n    });\n  }\n}\n\nclass VideoWorkerYoutube extends BaseClass {\n  type = 'youtube';\n\n  static parseURL(url) {\n    // eslint-disable-next-line no-useless-escape\n    const regExp = /.*(?:youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|shorts\\/|watch\\?v=)([^#\\&\\?]*).*/;\n    const match = url.match(regExp);\n    return match && match[1].length === 11 ? match[1] : false;\n  }\n\n  init() {\n    super.init();\n\n    loadAPI();\n  }\n\n  play(start) {\n    const self = this;\n    if (!self.player || !self.player.playVideo) {\n      return;\n    }\n\n    if (typeof start !== 'undefined') {\n      self.player.seekTo(start || 0);\n    }\n\n    if (global.YT.PlayerState.PLAYING !== self.player.getPlayerState()) {\n      // Don't play if video is already ended and with no loop.\n      if (self.options.endTime && !self.options.loop) {\n        self.getCurrentTime((seconds) => {\n          if (seconds < self.options.endTime) {\n            self.player.playVideo();\n          }\n        });\n      } else {\n        self.player.playVideo();\n      }\n    }\n  }\n\n  pause() {\n    const self = this;\n    if (!self.player || !self.player.pauseVideo) {\n      return;\n    }\n\n    if (global.YT.PlayerState.PLAYING === self.player.getPlayerState()) {\n      self.player.pauseVideo();\n    }\n  }\n\n  mute() {\n    const self = this;\n    if (!self.player || !self.player.mute) {\n      return;\n    }\n\n    self.player.mute();\n  }\n\n  unmute() {\n    const self = this;\n    if (!self.player || !self.player.unMute) {\n      return;\n    }\n\n    self.player.unMute();\n  }\n\n  setVolume(volume = false) {\n    const self = this;\n    if (!self.player || typeof volume !== 'number' || !self.player.setVolume) {\n      return;\n    }\n\n    self.player.setVolume(volume);\n  }\n\n  getVolume(callback) {\n    const self = this;\n    if (!self.player) {\n      callback(false);\n      return;\n    }\n\n    if (self.player.getVolume) {\n      callback(self.player.getVolume());\n    }\n  }\n\n  getMuted(callback) {\n    const self = this;\n    if (!self.player) {\n      callback(null);\n      return;\n    }\n\n    if (self.player.isMuted) {\n      callback(self.player.isMuted());\n    }\n  }\n\n  setCurrentTime(currentTime = false) {\n    const self = this;\n    if (!self.player || typeof currentTime !== 'number' || !self.player.seekTo) {\n      return;\n    }\n\n    self.player.seekTo(currentTime);\n  }\n\n  getCurrentTime(callback) {\n    const self = this;\n    if (!self.player || !self.player.getCurrentTime) {\n      return;\n    }\n\n    callback(self.player.getCurrentTime());\n  }\n\n  getImageURL(callback) {\n    const self = this;\n\n    if (self.videoImage) {\n      callback(self.videoImage);\n      return;\n    }\n\n    const availableSizes = ['maxresdefault', 'sddefault', 'hqdefault', '0'];\n    let step = 0;\n\n    const tempImg = new Image();\n    tempImg.onload = function () {\n      // if no thumbnail, youtube add their own image with width = 120px\n      if ((this.naturalWidth || this.width) !== 120 || step === availableSizes.length - 1) {\n        // ok\n        self.videoImage = `https://img.youtube.com/vi/${self.videoID}/${availableSizes[step]}.jpg`;\n        callback(self.videoImage);\n      } else {\n        // try another size\n        step += 1;\n        this.src = `https://img.youtube.com/vi/${self.videoID}/${availableSizes[step]}.jpg`;\n      }\n    };\n    tempImg.src = `https://img.youtube.com/vi/${self.videoID}/${availableSizes[step]}.jpg`;\n  }\n\n  getVideo(callback) {\n    const self = this;\n\n    // return generated video block\n    if (self.$video) {\n      callback(self.$video);\n      return;\n    }\n\n    // generate new video block\n    onAPIready(() => {\n      let hiddenDiv;\n      if (!self.$video) {\n        hiddenDiv = document.createElement('div');\n        hiddenDiv.style.display = 'none';\n      }\n\n      self.playerOptions = {\n        // GDPR Compliance.\n        host: 'https://www.youtube-nocookie.com',\n        videoId: self.videoID,\n        playerVars: {\n          autohide: 1,\n          rel: 0,\n          autoplay: 0,\n          // autoplay enable on mobile devices\n          playsinline: 1,\n        },\n      };\n\n      // hide controls\n      if (!self.options.showControls) {\n        self.playerOptions.playerVars.iv_load_policy = 3;\n        self.playerOptions.playerVars.modestbranding = 1;\n        self.playerOptions.playerVars.controls = 0;\n        self.playerOptions.playerVars.showinfo = 0;\n        self.playerOptions.playerVars.disablekb = 1;\n      }\n\n      // events\n      let ytStarted;\n      let ytProgressInterval;\n      self.playerOptions.events = {\n        onReady(e) {\n          // mute\n          if (self.options.mute) {\n            e.target.mute();\n          } else if (typeof self.options.volume === 'number') {\n            e.target.setVolume(self.options.volume);\n          }\n\n          // autoplay\n          if (self.options.autoplay) {\n            self.play(self.options.startTime);\n          }\n          self.fire('ready', e);\n\n          // For seamless loops, set the endTime to 0.1 seconds less than the video's duration\n          // https://github.com/nk-o/video-worker/issues/2\n          if (self.options.loop && !self.options.endTime) {\n            const secondsOffset = 0.1;\n            self.options.endTime = self.player.getDuration() - secondsOffset;\n          }\n\n          // volumechange\n          setInterval(() => {\n            self.getVolume((volume) => {\n              if (self.options.volume !== volume) {\n                self.options.volume = volume;\n                self.fire('volumechange', e);\n              }\n            });\n          }, 150);\n        },\n        onStateChange(e) {\n          // loop\n          if (self.options.loop && e.data === global.YT.PlayerState.ENDED) {\n            self.play(self.options.startTime);\n          }\n          if (!ytStarted && e.data === global.YT.PlayerState.PLAYING) {\n            ytStarted = 1;\n            self.fire('started', e);\n          }\n          if (e.data === global.YT.PlayerState.PLAYING) {\n            self.fire('play', e);\n          }\n          if (e.data === global.YT.PlayerState.PAUSED) {\n            self.fire('pause', e);\n          }\n          if (e.data === global.YT.PlayerState.ENDED) {\n            self.fire('ended', e);\n          }\n\n          // progress check\n          if (e.data === global.YT.PlayerState.PLAYING) {\n            ytProgressInterval = setInterval(() => {\n              self.fire('timeupdate', e);\n\n              // check for end of video and play again or stop\n              if (self.options.endTime && self.player.getCurrentTime() >= self.options.endTime) {\n                if (self.options.loop) {\n                  self.play(self.options.startTime);\n                } else {\n                  self.pause();\n                }\n              }\n            }, 150);\n          } else {\n            clearInterval(ytProgressInterval);\n          }\n        },\n        onError(e) {\n          self.fire('error', e);\n        },\n      };\n\n      const firstInit = !self.$video;\n      if (firstInit) {\n        const div = document.createElement('div');\n        div.setAttribute('id', self.playerID);\n        hiddenDiv.appendChild(div);\n        document.body.appendChild(hiddenDiv);\n      }\n      self.player = self.player || new global.YT.Player(self.playerID, self.playerOptions);\n      if (firstInit) {\n        self.$video = document.getElementById(self.playerID);\n\n        // add accessibility attributes\n        if (self.options.accessibilityHidden) {\n          self.$video.setAttribute('tabindex', '-1');\n          self.$video.setAttribute('aria-hidden', 'true');\n        }\n\n        // get video width and height\n        self.videoWidth = parseInt(self.$video.getAttribute('width'), 10) || 1280;\n        self.videoHeight = parseInt(self.$video.getAttribute('height'), 10) || 720;\n      }\n\n      callback(self.$video);\n    });\n  }\n}\n\nexport default VideoWorkerYoutube;\n","import BaseClass from '../base-class';\nimport global from '../utils/global';\nimport Deferred from '../utils/deferred';\n\nlet VimeoAPIadded = 0;\nlet loadingVimeoPlayer = 0;\nconst loadingVimeoDefer = new Deferred();\n\nfunction loadAPI() {\n  if (VimeoAPIadded) {\n    return;\n  }\n\n  VimeoAPIadded = true;\n\n  // Useful when Vimeo API added using RequireJS https://github.com/nk-o/video-worker/pull/7\n  if (typeof global.Vimeo !== 'undefined') {\n    return;\n  }\n\n  const src = 'https://player.vimeo.com/api/player.js';\n\n  // add script in head section\n  let tag = document.createElement('script');\n  let head = document.getElementsByTagName('head')[0];\n  tag.src = src;\n\n  head.appendChild(tag);\n\n  head = null;\n  tag = null;\n}\n\nfunction onAPIready(callback) {\n  if (typeof global.Vimeo === 'undefined' && !loadingVimeoPlayer) {\n    loadingVimeoPlayer = 1;\n    const vimeoInterval = setInterval(() => {\n      if (typeof global.Vimeo !== 'undefined') {\n        clearInterval(vimeoInterval);\n        loadingVimeoDefer.resolve('done');\n        callback();\n      }\n    }, 20);\n  } else if (typeof global.Vimeo !== 'undefined') {\n    callback();\n  } else {\n    loadingVimeoDefer.done(() => {\n      callback();\n    });\n  }\n}\n\nclass VideoWorkerVimeo extends BaseClass {\n  type = 'vimeo';\n\n  static parseURL(url) {\n    // eslint-disable-next-line no-useless-escape\n    const regExp =\n      /https?:\\/\\/(?:www\\.|player\\.)?vimeo.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/([^/]*)\\/videos\\/|album\\/(\\d+)\\/video\\/|video\\/|)(\\d+)(?:$|\\/|\\?)/;\n    const match = url.match(regExp);\n    return match && match[3] ? match[3] : false;\n  }\n\n  // Try to extract a hash for private videos from the URL.\n  // Thanks to https://github.com/sampotts/plyr\n  static parseURLHash(url) {\n    /* This regex matches a hexadecimal hash if given in any of these forms:\n     *  - [https://player.]vimeo.com/video/{id}/{hash}[?params]\n     *  - [https://player.]vimeo.com/video/{id}?h={hash}[&params]\n     *  - [https://player.]vimeo.com/video/{id}?[params]&h={hash}\n     *  - video/{id}/{hash}\n     * If matched, the hash is available in capture group 4\n     */\n    const regex = /^.*(vimeo.com\\/|video\\/)(\\d+)(\\?.*&*h=|\\/)+([\\d,a-f]+)/;\n    const found = url.match(regex);\n\n    return found && found.length === 5 ? found[4] : null;\n  }\n\n  init() {\n    super.init();\n\n    loadAPI();\n  }\n\n  play(start) {\n    const self = this;\n    if (!self.player) {\n      return;\n    }\n\n    if (typeof start !== 'undefined') {\n      self.player.setCurrentTime(start);\n    }\n\n    self.player.getPaused().then((paused) => {\n      if (paused) {\n        // Don't play if video is already ended and with no loop.\n        if (self.options.endTime && !self.options.loop) {\n          self.getCurrentTime((seconds) => {\n            if (seconds < self.options.endTime) {\n              self.player.play();\n            }\n          });\n        } else {\n          self.player.play();\n        }\n      }\n    });\n  }\n\n  pause() {\n    const self = this;\n    if (!self.player) {\n      return;\n    }\n\n    self.player.getPaused().then((paused) => {\n      if (!paused) {\n        self.player.pause();\n      }\n    });\n  }\n\n  mute() {\n    const self = this;\n    if (!self.player || !self.player.setVolume) {\n      return;\n    }\n\n    self.setVolume(0);\n  }\n\n  unmute() {\n    const self = this;\n    if (!self.player || !self.player.setVolume) {\n      return;\n    }\n\n    // In case the default volume is 0, we have to set 100 when unmute.\n    self.setVolume(self.options.volume || 100);\n  }\n\n  setVolume(volume = false) {\n    const self = this;\n    if (!self.player || typeof volume !== 'number' || !self.player.setVolume) {\n      return;\n    }\n\n    self.player.setVolume(volume / 100);\n  }\n\n  getVolume(callback) {\n    const self = this;\n    if (!self.player) {\n      callback(false);\n      return;\n    }\n\n    if (self.player.getVolume) {\n      self.player.getVolume().then((volume) => {\n        callback(volume * 100);\n      });\n    }\n  }\n\n  getMuted(callback) {\n    const self = this;\n    if (!self.player) {\n      callback(null);\n      return;\n    }\n\n    if (self.player.getVolume) {\n      self.player.getVolume().then((volume) => {\n        callback(!!volume);\n      });\n    }\n  }\n\n  setCurrentTime(currentTime = false) {\n    const self = this;\n    if (!self.player || typeof currentTime !== 'number' || !self.player.setCurrentTime) {\n      return;\n    }\n\n    self.player.setCurrentTime(currentTime);\n  }\n\n  getCurrentTime(callback) {\n    const self = this;\n    if (!self.player || !self.player.getCurrentTime) {\n      return;\n    }\n\n    self.player.getCurrentTime().then((currentTime) => {\n      callback(currentTime);\n    });\n  }\n\n  getImageURL(callback) {\n    const self = this;\n\n    if (self.videoImage) {\n      callback(self.videoImage);\n      return;\n    }\n\n    // We should provide width to get HQ thumbnail URL.\n    let width = global.innerWidth || 1920;\n    if (global.devicePixelRatio) {\n      width *= global.devicePixelRatio;\n    }\n    width = Math.min(width, 1920);\n\n    let request = new XMLHttpRequest();\n    // https://vimeo.com/api/oembed.json?url=https://vimeo.com/235212527\n    request.open('GET', `https://vimeo.com/api/oembed.json?url=${self.url}&width=${width}`, true);\n    request.onreadystatechange = function () {\n      if (this.readyState === 4) {\n        if (this.status >= 200 && this.status < 400) {\n          // Success!\n          const response = JSON.parse(this.responseText);\n\n          if (response.thumbnail_url) {\n            self.videoImage = response.thumbnail_url;\n            callback(self.videoImage);\n          }\n        } else {\n          // Error :(\n        }\n      }\n    };\n    request.send();\n    request = null;\n  }\n\n  getVideo(callback) {\n    const self = this;\n\n    // return generated video block\n    if (self.$video) {\n      callback(self.$video);\n      return;\n    }\n\n    // generate new video block\n    onAPIready(() => {\n      let hiddenDiv;\n      if (!self.$video) {\n        hiddenDiv = document.createElement('div');\n        hiddenDiv.style.display = 'none';\n      }\n\n      self.playerOptions = {\n        // GDPR Compliance.\n        dnt: 1,\n        id: self.videoID,\n        autopause: 0,\n        transparent: 0,\n        autoplay: self.options.autoplay ? 1 : 0,\n        loop: self.options.loop ? 1 : 0,\n        muted: self.options.mute || self.options.volume === 0 ? 1 : 0,\n      };\n\n      // private video hash\n      const urlHash = self.constructor.parseURLHash(self.url);\n      if (urlHash) {\n        self.playerOptions.h = urlHash;\n      }\n\n      // hide controls\n      if (!self.options.showControls) {\n        self.playerOptions.controls = 0;\n      }\n\n      // enable background option\n      if (!self.options.showControls && self.options.loop && self.options.autoplay) {\n        self.playerOptions.background = 1;\n      }\n\n      if (!self.$video) {\n        let playerOptionsString = '';\n        Object.keys(self.playerOptions).forEach((key) => {\n          if (playerOptionsString !== '') {\n            playerOptionsString += '&';\n          }\n          playerOptionsString += `${key}=${encodeURIComponent(self.playerOptions[key])}`;\n        });\n\n        // we need to create iframe manually because when we create it using API\n        // js events won't triggers after iframe moved to another place\n        self.$video = document.createElement('iframe');\n        self.$video.setAttribute('id', self.playerID);\n        self.$video.setAttribute(\n          'src',\n          `https://player.vimeo.com/video/${self.videoID}?${playerOptionsString}`\n        );\n        self.$video.setAttribute('frameborder', '0');\n        self.$video.setAttribute('mozallowfullscreen', '');\n        self.$video.setAttribute('allowfullscreen', '');\n        self.$video.setAttribute('title', 'Vimeo video player');\n\n        // add accessibility attributes\n        if (self.options.accessibilityHidden) {\n          self.$video.setAttribute('tabindex', '-1');\n          self.$video.setAttribute('aria-hidden', 'true');\n        }\n\n        hiddenDiv.appendChild(self.$video);\n        document.body.appendChild(hiddenDiv);\n      }\n      self.player = self.player || new global.Vimeo.Player(self.$video, self.playerOptions);\n\n      // Since Vimeo removed the `volume` parameter, we have to set it manually.\n      if (!self.options.mute && typeof self.options.volume === 'number') {\n        self.setVolume(self.options.volume);\n      }\n\n      // set current time for autoplay\n      if (self.options.startTime && self.options.autoplay) {\n        self.player.setCurrentTime(self.options.startTime);\n      }\n\n      // get video width and height\n      self.player.getVideoWidth().then((width) => {\n        self.videoWidth = width || 1280;\n      });\n      self.player.getVideoHeight().then((height) => {\n        self.videoHeight = height || 720;\n      });\n\n      // events\n      let vmStarted;\n      self.player.on('timeupdate', (e) => {\n        if (!vmStarted) {\n          self.fire('started', e);\n          vmStarted = 1;\n        }\n\n        self.fire('timeupdate', e);\n\n        // check for end of video and play again or stop\n        if (self.options.endTime && e.seconds >= self.options.endTime) {\n          if (self.options.loop) {\n            self.play(self.options.startTime);\n          } else {\n            self.pause();\n          }\n        }\n      });\n      self.player.on('play', (e) => {\n        self.fire('play', e);\n\n        // check for the start time and start with it\n        if (self.options.startTime && e.seconds === 0) {\n          self.play(self.options.startTime);\n        }\n      });\n      self.player.on('pause', (e) => {\n        self.fire('pause', e);\n      });\n      self.player.on('ended', (e) => {\n        self.fire('ended', e);\n      });\n      self.player.on('loaded', (e) => {\n        self.fire('ready', e);\n      });\n      self.player.on('volumechange', (e) => {\n        self.getVolume((volume) => {\n          self.options.volume = volume;\n        });\n        self.fire('volumechange', e);\n      });\n      self.player.on('error', (e) => {\n        self.fire('error', e);\n      });\n\n      callback(self.$video);\n    });\n  }\n}\n\nexport default VideoWorkerVimeo;\n","import BaseClass from '../base-class';\n\nclass VideoWorkerLocal extends BaseClass {\n  type = 'local';\n\n  static parseURL(url) {\n    // eslint-disable-next-line no-useless-escape\n    const videoFormats = url.split(/,(?=mp4\\:|webm\\:|ogv\\:|ogg\\:)/);\n    const result = {};\n    let ready = 0;\n\n    videoFormats.forEach((val) => {\n      // eslint-disable-next-line no-useless-escape\n      const match = val.match(/^(mp4|webm|ogv|ogg)\\:(.*)/);\n      if (match && match[1] && match[2]) {\n        // eslint-disable-next-line prefer-destructuring\n        result[match[1] === 'ogv' ? 'ogg' : match[1]] = match[2];\n        ready = 1;\n      }\n    });\n\n    return ready ? result : false;\n  }\n\n  play(start) {\n    const self = this;\n    if (!self.player) {\n      return;\n    }\n\n    if (typeof start !== 'undefined') {\n      self.player.currentTime = start;\n    }\n\n    if (self.player.paused) {\n      // Don't play if video is already ended and with no loop.\n      if (self.options.endTime && !self.options.loop) {\n        self.getCurrentTime((seconds) => {\n          if (seconds < self.options.endTime) {\n            self.player.play();\n          }\n        });\n      } else {\n        self.player.play();\n      }\n    }\n  }\n\n  pause() {\n    const self = this;\n    if (!self.player || self.player.paused) {\n      return;\n    }\n\n    self.player.pause();\n  }\n\n  mute() {\n    const self = this;\n    if (!self.player) {\n      return;\n    }\n\n    self.$video.muted = true;\n  }\n\n  unmute() {\n    const self = this;\n    if (!self.player) {\n      return;\n    }\n\n    self.$video.muted = false;\n  }\n\n  setVolume(volume = false) {\n    const self = this;\n    if (!self.player || typeof volume !== 'number') {\n      return;\n    }\n\n    self.$video.volume = volume / 100;\n  }\n\n  getVolume(callback) {\n    const self = this;\n    if (!self.player) {\n      callback(false);\n      return;\n    }\n\n    callback(self.$video.volume * 100);\n  }\n\n  getMuted(callback) {\n    const self = this;\n    if (!self.player) {\n      callback(null);\n      return;\n    }\n\n    callback(self.$video.muted);\n  }\n\n  setCurrentTime(currentTime = false) {\n    const self = this;\n    if (!self.player || typeof currentTime !== 'number') {\n      return;\n    }\n\n    self.$video.currentTime = currentTime;\n  }\n\n  getCurrentTime(callback) {\n    const self = this;\n    if (!self.player) {\n      return;\n    }\n\n    callback(self.player.currentTime);\n  }\n\n  getImageURL(callback) {\n    const self = this;\n\n    if (self.videoImage) {\n      callback(self.videoImage);\n    }\n  }\n\n  getVideo(callback) {\n    const self = this;\n\n    // return generated video block\n    if (self.$video) {\n      callback(self.$video);\n      return;\n    }\n\n    // generate new video block\n    let hiddenDiv;\n    if (!self.$video) {\n      hiddenDiv = document.createElement('div');\n      hiddenDiv.style.display = 'none';\n    }\n\n    function addSourceElement(element, src, type) {\n      const source = document.createElement('source');\n      source.src = src;\n      source.type = type;\n      element.appendChild(source);\n    }\n\n    if (!self.$video) {\n      self.$video = document.createElement('video');\n      self.player = self.$video;\n\n      // show controls\n      if (self.options.showControls) {\n        self.$video.controls = true;\n      }\n\n      // set volume\n      if (typeof self.options.volume === 'number') {\n        self.setVolume(self.options.volume);\n      }\n\n      // mute (it is required to mute after the volume set)\n      if (self.options.mute) {\n        self.mute();\n      }\n\n      // loop\n      if (self.options.loop) {\n        self.$video.loop = true;\n      }\n\n      // autoplay enable on mobile devices\n      self.$video.setAttribute('playsinline', '');\n      self.$video.setAttribute('webkit-playsinline', '');\n\n      // add accessibility attributes\n      if (self.options.accessibilityHidden) {\n        self.$video.setAttribute('tabindex', '-1');\n        self.$video.setAttribute('aria-hidden', 'true');\n      }\n\n      self.$video.setAttribute('id', self.playerID);\n      hiddenDiv.appendChild(self.$video);\n      document.body.appendChild(hiddenDiv);\n\n      Object.keys(self.videoID).forEach((key) => {\n        addSourceElement(self.$video, self.videoID[key], `video/${key}`);\n      });\n    }\n\n    let locStarted;\n    self.player.addEventListener('playing', (e) => {\n      if (!locStarted) {\n        self.fire('started', e);\n      }\n      locStarted = 1;\n    });\n    self.player.addEventListener('timeupdate', function (e) {\n      self.fire('timeupdate', e);\n\n      // check for end of video and play again or stop\n      if (self.options.endTime && this.currentTime >= self.options.endTime) {\n        if (self.options.loop) {\n          self.play(self.options.startTime);\n        } else {\n          self.pause();\n        }\n      }\n    });\n    self.player.addEventListener('play', (e) => {\n      self.fire('play', e);\n    });\n    self.player.addEventListener('pause', (e) => {\n      self.fire('pause', e);\n    });\n    self.player.addEventListener('ended', (e) => {\n      self.fire('ended', e);\n    });\n    self.player.addEventListener('loadedmetadata', function () {\n      // get video width and height\n      self.videoWidth = this.videoWidth || 1280;\n      self.videoHeight = this.videoHeight || 720;\n\n      self.fire('ready');\n\n      // autoplay\n      if (self.options.autoplay) {\n        self.play(self.options.startTime);\n      }\n    });\n    self.player.addEventListener('volumechange', (e) => {\n      self.getVolume((volume) => {\n        self.options.volume = volume;\n      });\n      self.fire('volumechange', e);\n    });\n    self.player.addEventListener('error', (e) => {\n      self.fire('error', e);\n    });\n\n    callback(self.$video);\n  }\n}\n\nexport default VideoWorkerLocal;\n","import VideoWorkerBase from './base-class';\nimport VideoWorkerYoutube from './providers/youtube';\nimport VideoWorkerVimeo from './providers/vimeo';\nimport VideoWorkerLocal from './providers/local';\n\nfunction VideoWorker(url, options) {\n  let result = false;\n\n  Object.keys(VideoWorker.providers).forEach((key) => {\n    if (!result && VideoWorker.providers[key].parseURL(url)) {\n      result = new VideoWorker.providers[key](url, options);\n    }\n  });\n\n  return result || new VideoWorkerBase(url, options);\n}\n\nVideoWorker.BaseClass = VideoWorkerBase;\nVideoWorker.providers = {\n  Youtube: VideoWorkerYoutube,\n  Vimeo: VideoWorkerVimeo,\n  Local: VideoWorkerLocal,\n};\n\nexport default VideoWorker;\n"],"names":["autoplay","loop","mute","volume","showControls","accessibilityHidden","startTime","endTime","extend","out","args","Object","keys","forEach","i","key","ID","VideoWorkerBase","type","constructor","url","options","self","options_default","defaults","videoID","parseURL","init","isValid","playerID","on","name","callback","userEventsList","push","off","val","fire","apply","play","start","pause","unmute","setVolume","getVolume","getMuted","setCurrentTime","currentTime","getCurrentTime","getImageURL","getVideo","win","window","global","Deferred","doneCallbacks","failCallbacks","prototype","execute","list","length","Array","slice","call","resolve","reject","done","fail","YoutubeAPIadded","loadingYoutubePlayer","loadingYoutubeDefer","loadAPI","src","tag","document","createElement","head","getElementsByTagName","appendChild","onAPIready","YT","loaded","onYouTubeIframeAPIReady","VideoWorkerYoutube","BaseClass","regExp","match","player","playVideo","seekTo","PlayerState","PLAYING","getPlayerState","seconds","pauseVideo","unMute","isMuted","videoImage","availableSizes","step","tempImg","Image","onload","naturalWidth","width","$video","hiddenDiv","style","display","playerOptions","host","videoId","playerVars","autohide","rel","playsinline","iv_load_policy","modestbranding","controls","showinfo","disablekb","ytStarted","ytProgressInterval","events","onReady","e","target","secondsOffset","getDuration","setInterval","onStateChange","data","ENDED","PAUSED","clearInterval","onError","firstInit","div","setAttribute","body","Player","getElementById","videoWidth","parseInt","getAttribute","videoHeight","VimeoAPIadded","loadingVimeoPlayer","loadingVimeoDefer","Vimeo","vimeoInterval","VideoWorkerVimeo","parseURLHash","regex","found","getPaused","then","paused","innerWidth","devicePixelRatio","Math","min","request","XMLHttpRequest","open","onreadystatechange","readyState","status","response","JSON","parse","responseText","thumbnail_url","send","dnt","id","autopause","transparent","muted","urlHash","h","background","playerOptionsString","encodeURIComponent","getVideoWidth","getVideoHeight","height","vmStarted","VideoWorkerLocal","videoFormats","split","result","ready","addSourceElement","element","source","locStarted","addEventListener","VideoWorker","providers","Youtube","Local"],"mappings":"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"}
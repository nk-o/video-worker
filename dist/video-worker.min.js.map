{"version":3,"file":"video-worker.min.js","sources":["../src/utils/global.js","../src/utils/deferred.js","../src/defaults.js","../src/video-worker.js","../src/utils/extend.js"],"sourcesContent":["/* eslint-disable import/no-mutable-exports */\n/* eslint-disable no-restricted-globals */\nlet win;\n\nif (typeof window !== 'undefined') {\n  win = window;\n} else if (typeof global !== 'undefined') {\n  win = global;\n} else if (typeof self !== 'undefined') {\n  win = self;\n} else {\n  win = {};\n}\n\nexport default win;\n","// Deferred\n// thanks http://stackoverflow.com/questions/18096715/implement-deferred-object-without-using-jquery\nfunction Deferred() {\n  this.doneCallbacks = [];\n  this.failCallbacks = [];\n}\n\nDeferred.prototype = {\n  execute(list, args) {\n    let i = list.length;\n    // eslint-disable-next-line no-param-reassign\n    args = Array.prototype.slice.call(args);\n\n    while (i) {\n      i -= 1;\n      list[i].apply(null, args);\n    }\n  },\n  resolve(...args) {\n    this.execute(this.doneCallbacks, args);\n  },\n  reject(...args) {\n    this.execute(this.failCallbacks, args);\n  },\n  done(callback) {\n    this.doneCallbacks.push(callback);\n  },\n  fail(callback) {\n    this.failCallbacks.push(callback);\n  },\n};\n\nexport default Deferred;\n","export default {\n  autoplay: false,\n  loop: false,\n  mute: false,\n  volume: 100,\n  showControls: true,\n  accessibilityHidden: false,\n\n  // start / end video time in seconds\n  startTime: 0,\n  endTime: 0,\n};\n","import global from './utils/global';\nimport Deferred from './utils/deferred';\nimport defaults from './defaults';\nimport extend from './utils/extend';\n\nlet ID = 0;\nlet YoutubeAPIadded = 0;\nlet VimeoAPIadded = 0;\nlet loadingYoutubePlayer = 0;\nlet loadingVimeoPlayer = 0;\nconst loadingYoutubeDefer = new Deferred();\nconst loadingVimeoDefer = new Deferred();\n\nclass VideoWorker {\n  constructor(url, options) {\n    const self = this;\n\n    self.url = url;\n\n    self.options_default = { ...defaults };\n\n    self.options = extend({}, self.options_default, options);\n\n    // check URL\n    self.videoID = self.parseURL(url);\n\n    // init\n    if (self.videoID) {\n      self.ID = ID;\n      ID += 1;\n      self.loadAPI();\n      self.init();\n    }\n  }\n\n  parseURL(url) {\n    // parse youtube ID\n    function getYoutubeID(ytUrl) {\n      // eslint-disable-next-line no-useless-escape\n      const regExp = /.*(?:youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|shorts\\/|watch\\?v=)([^#\\&\\?]*).*/;\n      const match = ytUrl.match(regExp);\n      return match && match[1].length === 11 ? match[1] : false;\n    }\n\n    // parse vimeo ID\n    function getVimeoID(vmUrl) {\n      // eslint-disable-next-line no-useless-escape\n      const regExp =\n        /https?:\\/\\/(?:www\\.|player\\.)?vimeo.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/([^/]*)\\/videos\\/|album\\/(\\d+)\\/video\\/|video\\/|)(\\d+)(?:$|\\/|\\?)/;\n      const match = vmUrl.match(regExp);\n      return match && match[3] ? match[3] : false;\n    }\n\n    // parse local string\n    function getLocalVideos(locUrl) {\n      // eslint-disable-next-line no-useless-escape\n      const videoFormats = locUrl.split(/,(?=mp4\\:|webm\\:|ogv\\:|ogg\\:)/);\n      const result = {};\n      let ready = 0;\n      videoFormats.forEach((val) => {\n        // eslint-disable-next-line no-useless-escape\n        const match = val.match(/^(mp4|webm|ogv|ogg)\\:(.*)/);\n        if (match && match[1] && match[2]) {\n          // eslint-disable-next-line prefer-destructuring\n          result[match[1] === 'ogv' ? 'ogg' : match[1]] = match[2];\n          ready = 1;\n        }\n      });\n      return ready ? result : false;\n    }\n\n    const Youtube = getYoutubeID(url);\n    const Vimeo = getVimeoID(url);\n    const Local = getLocalVideos(url);\n\n    if (Youtube) {\n      this.type = 'youtube';\n      return Youtube;\n    }\n\n    if (Vimeo) {\n      this.type = 'vimeo';\n      return Vimeo;\n    }\n\n    if (Local) {\n      this.type = 'local';\n      return Local;\n    }\n\n    return false;\n  }\n\n  isValid() {\n    return !!this.videoID;\n  }\n\n  // events\n  on(name, callback) {\n    this.userEventsList = this.userEventsList || [];\n\n    // add new callback in events list\n    (this.userEventsList[name] || (this.userEventsList[name] = [])).push(callback);\n  }\n\n  off(name, callback) {\n    if (!this.userEventsList || !this.userEventsList[name]) {\n      return;\n    }\n\n    if (!callback) {\n      delete this.userEventsList[name];\n    } else {\n      this.userEventsList[name].forEach((val, key) => {\n        if (val === callback) {\n          this.userEventsList[name][key] = false;\n        }\n      });\n    }\n  }\n\n  fire(name, ...args) {\n    if (this.userEventsList && typeof this.userEventsList[name] !== 'undefined') {\n      this.userEventsList[name].forEach((val) => {\n        // call with all arguments\n        if (val) {\n          val.apply(this, args);\n        }\n      });\n    }\n  }\n\n  play(start) {\n    const self = this;\n    if (!self.player) {\n      return;\n    }\n\n    if (self.type === 'youtube' && self.player.playVideo) {\n      if (typeof start !== 'undefined') {\n        self.player.seekTo(start || 0);\n      }\n      if (global.YT.PlayerState.PLAYING !== self.player.getPlayerState()) {\n        self.player.playVideo();\n      }\n    }\n\n    if (self.type === 'vimeo') {\n      if (typeof start !== 'undefined') {\n        self.player.setCurrentTime(start);\n      }\n      self.player.getPaused().then((paused) => {\n        if (paused) {\n          self.player.play();\n        }\n      });\n    }\n\n    if (self.type === 'local') {\n      if (typeof start !== 'undefined') {\n        self.player.currentTime = start;\n      }\n      if (self.player.paused) {\n        self.player.play();\n      }\n    }\n  }\n\n  pause() {\n    const self = this;\n    if (!self.player) {\n      return;\n    }\n\n    if (self.type === 'youtube' && self.player.pauseVideo) {\n      if (global.YT.PlayerState.PLAYING === self.player.getPlayerState()) {\n        self.player.pauseVideo();\n      }\n    }\n\n    if (self.type === 'vimeo') {\n      self.player.getPaused().then((paused) => {\n        if (!paused) {\n          self.player.pause();\n        }\n      });\n    }\n\n    if (self.type === 'local') {\n      if (!self.player.paused) {\n        self.player.pause();\n      }\n    }\n  }\n\n  mute() {\n    const self = this;\n    if (!self.player) {\n      return;\n    }\n\n    if (self.type === 'youtube' && self.player.mute) {\n      self.player.mute();\n    }\n\n    if (self.type === 'vimeo' && self.player.setVolume) {\n      self.setVolume(0);\n    }\n\n    if (self.type === 'local') {\n      self.$video.muted = true;\n    }\n  }\n\n  unmute() {\n    const self = this;\n    if (!self.player) {\n      return;\n    }\n\n    if (self.type === 'youtube' && self.player.mute) {\n      self.player.unMute();\n    }\n\n    if (self.type === 'vimeo' && self.player.setVolume) {\n      // In case the default volume is 0, we have to set 100 when unmute.\n      self.setVolume(self.options.volume || 100);\n    }\n\n    if (self.type === 'local') {\n      self.$video.muted = false;\n    }\n  }\n\n  setVolume(volume = false) {\n    const self = this;\n    if (!self.player || typeof volume !== 'number') {\n      return;\n    }\n\n    if (self.type === 'youtube' && self.player.setVolume) {\n      self.player.setVolume(volume);\n    }\n\n    if (self.type === 'vimeo' && self.player.setVolume) {\n      self.player.setVolume(volume / 100);\n    }\n\n    if (self.type === 'local') {\n      self.$video.volume = volume / 100;\n    }\n  }\n\n  getVolume(callback) {\n    const self = this;\n    if (!self.player) {\n      callback(false);\n      return;\n    }\n\n    if (self.type === 'youtube' && self.player.getVolume) {\n      callback(self.player.getVolume());\n    }\n\n    if (self.type === 'vimeo' && self.player.getVolume) {\n      self.player.getVolume().then((volume) => {\n        callback(volume * 100);\n      });\n    }\n\n    if (self.type === 'local') {\n      callback(self.$video.volume * 100);\n    }\n  }\n\n  getMuted(callback) {\n    const self = this;\n    if (!self.player) {\n      callback(null);\n      return;\n    }\n\n    if (self.type === 'youtube' && self.player.isMuted) {\n      callback(self.player.isMuted());\n    }\n\n    if (self.type === 'vimeo' && self.player.getVolume) {\n      self.player.getVolume().then((volume) => {\n        callback(!!volume);\n      });\n    }\n\n    if (self.type === 'local') {\n      callback(self.$video.muted);\n    }\n  }\n\n  getImageURL(callback) {\n    const self = this;\n\n    if (self.videoImage) {\n      callback(self.videoImage);\n      return;\n    }\n\n    if (self.type === 'youtube') {\n      const availableSizes = ['maxresdefault', 'sddefault', 'hqdefault', '0'];\n      let step = 0;\n\n      const tempImg = new Image();\n      tempImg.onload = function () {\n        // if no thumbnail, youtube add their own image with width = 120px\n        if ((this.naturalWidth || this.width) !== 120 || step === availableSizes.length - 1) {\n          // ok\n          self.videoImage = `https://img.youtube.com/vi/${self.videoID}/${availableSizes[step]}.jpg`;\n          callback(self.videoImage);\n        } else {\n          // try another size\n          step += 1;\n          this.src = `https://img.youtube.com/vi/${self.videoID}/${availableSizes[step]}.jpg`;\n        }\n      };\n      tempImg.src = `https://img.youtube.com/vi/${self.videoID}/${availableSizes[step]}.jpg`;\n    }\n\n    if (self.type === 'vimeo') {\n      // We should provide width to get HQ thumbnail URL.\n      let width = global.innerWidth || 1920;\n      if (global.devicePixelRatio) {\n        width *= global.devicePixelRatio;\n      }\n      width = Math.min(width, 1920);\n\n      let request = new XMLHttpRequest();\n      // https://vimeo.com/api/oembed.json?url=https://vimeo.com/235212527\n      request.open('GET', `https://vimeo.com/api/oembed.json?url=${self.url}&width=${width}`, true);\n      request.onreadystatechange = function () {\n        if (this.readyState === 4) {\n          if (this.status >= 200 && this.status < 400) {\n            // Success!\n            const response = JSON.parse(this.responseText);\n\n            if (response.thumbnail_url) {\n              self.videoImage = response.thumbnail_url;\n              callback(self.videoImage);\n            }\n          } else {\n            // Error :(\n          }\n        }\n      };\n      request.send();\n      request = null;\n    }\n  }\n\n  // fallback to the old version.\n  getIframe(callback) {\n    this.getVideo(callback);\n  }\n\n  getVideo(callback) {\n    const self = this;\n\n    // return generated video block\n    if (self.$video) {\n      callback(self.$video);\n      return;\n    }\n\n    // generate new video block\n    self.onAPIready(() => {\n      let hiddenDiv;\n      if (!self.$video) {\n        hiddenDiv = document.createElement('div');\n        hiddenDiv.style.display = 'none';\n      }\n\n      // Youtube\n      if (self.type === 'youtube') {\n        self.playerOptions = {\n          // GDPR Compliance.\n          host: 'https://www.youtube-nocookie.com',\n          videoId: self.videoID,\n          playerVars: {\n            autohide: 1,\n            rel: 0,\n            autoplay: 0,\n            // autoplay enable on mobile devices\n            playsinline: 1,\n          },\n        };\n\n        // hide controls\n        if (!self.options.showControls) {\n          self.playerOptions.playerVars.iv_load_policy = 3;\n          self.playerOptions.playerVars.modestbranding = 1;\n          self.playerOptions.playerVars.controls = 0;\n          self.playerOptions.playerVars.showinfo = 0;\n          self.playerOptions.playerVars.disablekb = 1;\n        }\n\n        // events\n        let ytStarted;\n        let ytProgressInterval;\n        self.playerOptions.events = {\n          onReady(e) {\n            // mute\n            if (self.options.mute) {\n              e.target.mute();\n            } else if (typeof self.options.volume === 'number') {\n              e.target.setVolume(self.options.volume);\n            }\n\n            // autoplay\n            if (self.options.autoplay) {\n              self.play(self.options.startTime);\n            }\n            self.fire('ready', e);\n\n            // For seamless loops, set the endTime to 0.1 seconds less than the video's duration\n            // https://github.com/nk-o/video-worker/issues/2\n            if (self.options.loop && !self.options.endTime) {\n              const secondsOffset = 0.1;\n              self.options.endTime = self.player.getDuration() - secondsOffset;\n            }\n\n            // volumechange\n            setInterval(() => {\n              self.getVolume((volume) => {\n                if (self.options.volume !== volume) {\n                  self.options.volume = volume;\n                  self.fire('volumechange', e);\n                }\n              });\n            }, 150);\n          },\n          onStateChange(e) {\n            // loop\n            if (self.options.loop && e.data === global.YT.PlayerState.ENDED) {\n              self.play(self.options.startTime);\n            }\n            if (!ytStarted && e.data === global.YT.PlayerState.PLAYING) {\n              ytStarted = 1;\n              self.fire('started', e);\n            }\n            if (e.data === global.YT.PlayerState.PLAYING) {\n              self.fire('play', e);\n            }\n            if (e.data === global.YT.PlayerState.PAUSED) {\n              self.fire('pause', e);\n            }\n            if (e.data === global.YT.PlayerState.ENDED) {\n              self.fire('ended', e);\n            }\n\n            // progress check\n            if (e.data === global.YT.PlayerState.PLAYING) {\n              ytProgressInterval = setInterval(() => {\n                self.fire('timeupdate', e);\n\n                // check for end of video and play again or stop\n                if (self.options.endTime && self.player.getCurrentTime() >= self.options.endTime) {\n                  if (self.options.loop) {\n                    self.play(self.options.startTime);\n                  } else {\n                    self.pause();\n                  }\n                }\n              }, 150);\n            } else {\n              clearInterval(ytProgressInterval);\n            }\n          },\n          onError(e) {\n            self.fire('error', e);\n          },\n        };\n\n        const firstInit = !self.$video;\n        if (firstInit) {\n          const div = document.createElement('div');\n          div.setAttribute('id', self.playerID);\n          hiddenDiv.appendChild(div);\n          document.body.appendChild(hiddenDiv);\n        }\n        self.player = self.player || new global.YT.Player(self.playerID, self.playerOptions);\n        if (firstInit) {\n          self.$video = document.getElementById(self.playerID);\n\n          // add accessibility attributes\n          if (self.options.accessibilityHidden) {\n            self.$video.setAttribute('tabindex', '-1');\n            self.$video.setAttribute('aria-hidden', 'true');\n          }\n\n          // get video width and height\n          self.videoWidth = parseInt(self.$video.getAttribute('width'), 10) || 1280;\n          self.videoHeight = parseInt(self.$video.getAttribute('height'), 10) || 720;\n        }\n      }\n\n      // Vimeo\n      if (self.type === 'vimeo') {\n        self.playerOptions = {\n          // GDPR Compliance.\n          dnt: 1,\n          id: self.videoID,\n          autopause: 0,\n          transparent: 0,\n          autoplay: self.options.autoplay ? 1 : 0,\n          loop: self.options.loop ? 1 : 0,\n          muted: self.options.mute || self.options.volume === 0 ? 1 : 0,\n        };\n\n        // hide controls\n        if (!self.options.showControls) {\n          self.playerOptions.controls = 0;\n        }\n\n        // enable background option\n        if (!self.options.showControls && self.options.loop && self.options.autoplay) {\n          self.playerOptions.background = 1;\n        }\n\n        if (!self.$video) {\n          let playerOptionsString = '';\n          Object.keys(self.playerOptions).forEach((key) => {\n            if (playerOptionsString !== '') {\n              playerOptionsString += '&';\n            }\n            playerOptionsString += `${key}=${encodeURIComponent(self.playerOptions[key])}`;\n          });\n\n          // we need to create iframe manually because when we create it using API\n          // js events won't triggers after iframe moved to another place\n          self.$video = document.createElement('iframe');\n          self.$video.setAttribute('id', self.playerID);\n          self.$video.setAttribute(\n            'src',\n            `https://player.vimeo.com/video/${self.videoID}?${playerOptionsString}`\n          );\n          self.$video.setAttribute('frameborder', '0');\n          self.$video.setAttribute('mozallowfullscreen', '');\n          self.$video.setAttribute('allowfullscreen', '');\n          self.$video.setAttribute('title', 'Vimeo video player');\n\n          // add accessibility attributes\n          if (self.options.accessibilityHidden) {\n            self.$video.setAttribute('tabindex', '-1');\n            self.$video.setAttribute('aria-hidden', 'true');\n          }\n\n          hiddenDiv.appendChild(self.$video);\n          document.body.appendChild(hiddenDiv);\n        }\n        self.player = self.player || new global.Vimeo.Player(self.$video, self.playerOptions);\n\n        // Since Vimeo removed the `volume` parameter, we have to set it manually.\n        if (!self.options.mute && typeof self.options.volume === 'number') {\n          self.setVolume(self.options.volume);\n        }\n\n        // set current time for autoplay\n        if (self.options.startTime && self.options.autoplay) {\n          self.player.setCurrentTime(self.options.startTime);\n        }\n\n        // get video width and height\n        self.player.getVideoWidth().then((width) => {\n          self.videoWidth = width || 1280;\n        });\n        self.player.getVideoHeight().then((height) => {\n          self.videoHeight = height || 720;\n        });\n\n        // events\n        let vmStarted;\n        self.player.on('timeupdate', (e) => {\n          if (!vmStarted) {\n            self.fire('started', e);\n            vmStarted = 1;\n          }\n\n          self.fire('timeupdate', e);\n\n          // check for end of video and play again or stop\n          if (self.options.endTime) {\n            if (self.options.endTime && e.seconds >= self.options.endTime) {\n              if (self.options.loop) {\n                self.play(self.options.startTime);\n              } else {\n                self.pause();\n              }\n            }\n          }\n        });\n        self.player.on('play', (e) => {\n          self.fire('play', e);\n\n          // check for the start time and start with it\n          if (self.options.startTime && e.seconds === 0) {\n            self.play(self.options.startTime);\n          }\n        });\n        self.player.on('pause', (e) => {\n          self.fire('pause', e);\n        });\n        self.player.on('ended', (e) => {\n          self.fire('ended', e);\n        });\n        self.player.on('loaded', (e) => {\n          self.fire('ready', e);\n        });\n        self.player.on('volumechange', (e) => {\n          self.getVolume((volume) => {\n            self.options.volume = volume;\n          });\n          self.fire('volumechange', e);\n        });\n        self.player.on('error', (e) => {\n          self.fire('error', e);\n        });\n      }\n\n      // Local\n      function addSourceToLocal(element, src, type) {\n        const source = document.createElement('source');\n        source.src = src;\n        source.type = type;\n        element.appendChild(source);\n      }\n      if (self.type === 'local') {\n        if (!self.$video) {\n          self.$video = document.createElement('video');\n          self.player = self.$video;\n\n          // show controls\n          if (self.options.showControls) {\n            self.$video.controls = true;\n          }\n\n          // set volume\n          if (typeof self.options.volume === 'number') {\n            self.setVolume(self.options.volume);\n          }\n\n          // mute (it is required to mute after the volume set)\n          if (self.options.mute) {\n            self.mute();\n          }\n\n          // loop\n          if (self.options.loop) {\n            self.$video.loop = true;\n          }\n\n          // autoplay enable on mobile devices\n          self.$video.setAttribute('playsinline', '');\n          self.$video.setAttribute('webkit-playsinline', '');\n\n          // add accessibility attributes\n          if (self.options.accessibilityHidden) {\n            self.$video.setAttribute('tabindex', '-1');\n            self.$video.setAttribute('aria-hidden', 'true');\n          }\n\n          self.$video.setAttribute('id', self.playerID);\n          hiddenDiv.appendChild(self.$video);\n          document.body.appendChild(hiddenDiv);\n\n          Object.keys(self.videoID).forEach((key) => {\n            addSourceToLocal(self.$video, self.videoID[key], `video/${key}`);\n          });\n        }\n\n        let locStarted;\n        self.player.addEventListener('playing', (e) => {\n          if (!locStarted) {\n            self.fire('started', e);\n          }\n          locStarted = 1;\n        });\n        self.player.addEventListener('timeupdate', function (e) {\n          self.fire('timeupdate', e);\n\n          // check for end of video and play again or stop\n          if (self.options.endTime) {\n            if (self.options.endTime && this.currentTime >= self.options.endTime) {\n              if (self.options.loop) {\n                self.play(self.options.startTime);\n              } else {\n                self.pause();\n              }\n            }\n          }\n        });\n        self.player.addEventListener('play', (e) => {\n          self.fire('play', e);\n        });\n        self.player.addEventListener('pause', (e) => {\n          self.fire('pause', e);\n        });\n        self.player.addEventListener('ended', (e) => {\n          self.fire('ended', e);\n        });\n        self.player.addEventListener('loadedmetadata', function () {\n          // get video width and height\n          self.videoWidth = this.videoWidth || 1280;\n          self.videoHeight = this.videoHeight || 720;\n\n          self.fire('ready');\n\n          // autoplay\n          if (self.options.autoplay) {\n            self.play(self.options.startTime);\n          }\n        });\n        self.player.addEventListener('volumechange', (e) => {\n          self.getVolume((volume) => {\n            self.options.volume = volume;\n          });\n          self.fire('volumechange', e);\n        });\n        self.player.addEventListener('error', (e) => {\n          self.fire('error', e);\n        });\n      }\n      callback(self.$video);\n    });\n  }\n\n  init() {\n    const self = this;\n\n    self.playerID = `VideoWorker-${self.ID}`;\n  }\n\n  loadAPI() {\n    const self = this;\n\n    if (YoutubeAPIadded && VimeoAPIadded) {\n      return;\n    }\n\n    let src = '';\n\n    // load Youtube API\n    if (self.type === 'youtube' && !YoutubeAPIadded) {\n      YoutubeAPIadded = 1;\n      src = 'https://www.youtube.com/iframe_api';\n    }\n\n    // load Vimeo API\n    if (self.type === 'vimeo' && !VimeoAPIadded) {\n      VimeoAPIadded = 1;\n\n      // Useful when Vimeo API added using RequireJS https://github.com/nk-o/video-worker/pull/7\n      if (typeof global.Vimeo !== 'undefined') {\n        return;\n      }\n\n      src = 'https://player.vimeo.com/api/player.js';\n    }\n\n    if (!src) {\n      return;\n    }\n\n    // add script in head section\n    let tag = document.createElement('script');\n    let head = document.getElementsByTagName('head')[0];\n    tag.src = src;\n\n    head.appendChild(tag);\n\n    head = null;\n    tag = null;\n  }\n\n  onAPIready(callback) {\n    const self = this;\n\n    // Youtube\n    if (self.type === 'youtube') {\n      // Listen for global YT player callback\n      if ((typeof global.YT === 'undefined' || global.YT.loaded === 0) && !loadingYoutubePlayer) {\n        // Prevents Ready event from being called twice\n        loadingYoutubePlayer = 1;\n\n        // Creates deferred so, other players know when to wait.\n        global.onYouTubeIframeAPIReady = function () {\n          global.onYouTubeIframeAPIReady = null;\n          loadingYoutubeDefer.resolve('done');\n          callback();\n        };\n      } else if (typeof global.YT === 'object' && global.YT.loaded === 1) {\n        callback();\n      } else {\n        loadingYoutubeDefer.done(() => {\n          callback();\n        });\n      }\n    }\n\n    // Vimeo\n    if (self.type === 'vimeo') {\n      if (typeof global.Vimeo === 'undefined' && !loadingVimeoPlayer) {\n        loadingVimeoPlayer = 1;\n        const vimeoInterval = setInterval(() => {\n          if (typeof global.Vimeo !== 'undefined') {\n            clearInterval(vimeoInterval);\n            loadingVimeoDefer.resolve('done');\n            callback();\n          }\n        }, 20);\n      } else if (typeof global.Vimeo !== 'undefined') {\n        callback();\n      } else {\n        loadingVimeoDefer.done(() => {\n          callback();\n        });\n      }\n    }\n\n    // Local\n    if (self.type === 'local') {\n      callback();\n    }\n  }\n}\n\nexport default VideoWorker;\n","/**\n * Extend like jQuery.extend\n *\n * @param {Object} out - output object.\n * @param {...any} args - additional objects to extend.\n *\n * @returns {Object}\n */\nexport default function extend(out, ...args) {\n  out = out || {};\n\n  Object.keys(args).forEach((i) => {\n    if (!args[i]) {\n      return;\n    }\n    Object.keys(args[i]).forEach((key) => {\n      out[key] = args[i][key];\n    });\n  });\n\n  return out;\n}\n"],"names":["g","f","exports","module","define","amd","globalThis","self","VideoWorker","this","win","window","global","global$1","Deferred","doneCallbacks","failCallbacks","prototype","execute","list","args","i","length","Array","slice","call","apply","resolve","reject","done","callback","push","fail","defaults","autoplay","loop","mute","volume","showControls","accessibilityHidden","startTime","endTime","ID","YoutubeAPIadded","VimeoAPIadded","loadingYoutubePlayer","loadingVimeoPlayer","loadingYoutubeDefer","loadingVimeoDefer","constructor","url","options","options_default","out","Object","keys","forEach","key","extend","videoID","parseURL","loadAPI","init","Youtube","ytUrl","match","getYoutubeID","Vimeo","vmUrl","getVimeoID","Local","locUrl","videoFormats","split","result","ready","val","getLocalVideos","type","isValid","on","name","userEventsList","off","fire","play","start","player","playVideo","seekTo","YT","PlayerState","PLAYING","getPlayerState","setCurrentTime","getPaused","then","paused","currentTime","pause","pauseVideo","setVolume","$video","muted","unmute","unMute","getVolume","getMuted","isMuted","getImageURL","videoImage","availableSizes","step","tempImg","Image","onload","naturalWidth","width","src","innerWidth","devicePixelRatio","Math","min","request","XMLHttpRequest","open","onreadystatechange","readyState","status","response","JSON","parse","responseText","thumbnail_url","send","getIframe","getVideo","onAPIready","hiddenDiv","document","createElement","style","display","ytStarted","ytProgressInterval","playerOptions","host","videoId","playerVars","autohide","rel","playsinline","iv_load_policy","modestbranding","controls","showinfo","disablekb","events","onReady","e","target","secondsOffset","getDuration","setInterval","onStateChange","data","ENDED","PAUSED","getCurrentTime","clearInterval","onError","firstInit","div","setAttribute","playerID","appendChild","body","Player","getElementById","videoWidth","parseInt","getAttribute","videoHeight","dnt","id","autopause","transparent","background","playerOptionsString","encodeURIComponent","vmStarted","getVideoWidth","getVideoHeight","height","seconds","locStarted","element","source","addSourceToLocal","addEventListener","tag","head","getElementsByTagName","loaded","onYouTubeIframeAPIReady","vimeoInterval"],"mappings":"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"}
{"version":3,"file":"video-worker.cjs","sources":["../src/defaults.js","../src/utils/extend.js","../src/base-class.js","../src/utils/global.js","../src/utils/deferred.js","../src/providers/youtube.js","../src/providers/vimeo.js","../src/providers/local.js","../src/video-worker.js"],"sourcesContent":["export default {\n  autoplay: false,\n  loop: false,\n  mute: false,\n  volume: 100,\n  showControls: true,\n  accessibilityHidden: false,\n\n  // start / end video time in seconds\n  startTime: 0,\n  endTime: 0,\n};\n","/**\n * Extend like jQuery.extend\n *\n * @param {Object} out - output object.\n * @param {...any} args - additional objects to extend.\n *\n * @returns {Object}\n */\nexport default function extend(out, ...args) {\n  out = out || {};\n\n  Object.keys(args).forEach((i) => {\n    if (!args[i]) {\n      return;\n    }\n    Object.keys(args[i]).forEach((key) => {\n      out[key] = args[i][key];\n    });\n  });\n\n  return out;\n}\n","import defaults from './defaults';\nimport extend from './utils/extend';\n\nlet ID = 0;\n\nclass VideoWorkerBase {\n  type = 'none';\n\n  constructor(url, options) {\n    const self = this;\n\n    self.url = url;\n\n    self.options_default = { ...defaults };\n\n    self.options = extend({}, self.options_default, options);\n\n    // check URL\n    self.videoID = self.constructor.parseURL(url);\n\n    // init\n    if (self.videoID) {\n      self.init();\n    }\n  }\n\n  isValid() {\n    return !!this.videoID;\n  }\n\n  init() {\n    const self = this;\n\n    self.ID = ID;\n    ID += 1;\n\n    self.playerID = `VideoWorker-${self.ID}`;\n  }\n\n  // events\n  on(name, callback) {\n    this.userEventsList = this.userEventsList || [];\n\n    // add new callback in events list\n    (this.userEventsList[name] || (this.userEventsList[name] = [])).push(callback);\n  }\n\n  off(name, callback) {\n    if (!this.userEventsList || !this.userEventsList[name]) {\n      return;\n    }\n\n    if (!callback) {\n      delete this.userEventsList[name];\n    } else {\n      this.userEventsList[name].forEach((val, key) => {\n        if (val === callback) {\n          this.userEventsList[name][key] = false;\n        }\n      });\n    }\n  }\n\n  fire(name, ...args) {\n    if (this.userEventsList && typeof this.userEventsList[name] !== 'undefined') {\n      this.userEventsList[name].forEach((val) => {\n        // call with all arguments\n        if (val) {\n          val.apply(this, args);\n        }\n      });\n    }\n  }\n\n  /**\n   * Methods used in providers.\n   */\n  /* eslint-disable */\n  static parseURL(url) {\n    return false;\n  }\n  play(start) {}\n  pause() {}\n  mute() {}\n  unmute() {}\n  setVolume(volume = false) {}\n  getVolume(callback) {}\n  getMuted(callback) {}\n  setCurrentTime(currentTime = false) {}\n  getCurrentTime(callback) {}\n  getImageURL(callback) {}\n  getVideo(callback) {}\n  /* eslint-enable */\n}\n\nexport default VideoWorkerBase;\n","/* eslint-disable import/no-mutable-exports */\n/* eslint-disable no-restricted-globals */\nlet win;\n\nif (typeof window !== 'undefined') {\n  win = window;\n} else if (typeof global !== 'undefined') {\n  win = global;\n} else if (typeof self !== 'undefined') {\n  win = self;\n} else {\n  win = {};\n}\n\nexport default win;\n","// Deferred\n// thanks http://stackoverflow.com/questions/18096715/implement-deferred-object-without-using-jquery\nfunction Deferred() {\n  this.doneCallbacks = [];\n  this.failCallbacks = [];\n}\n\nDeferred.prototype = {\n  execute(list, args) {\n    let i = list.length;\n    // eslint-disable-next-line no-param-reassign\n    args = Array.prototype.slice.call(args);\n\n    while (i) {\n      i -= 1;\n      list[i].apply(null, args);\n    }\n  },\n  resolve(...args) {\n    this.execute(this.doneCallbacks, args);\n  },\n  reject(...args) {\n    this.execute(this.failCallbacks, args);\n  },\n  done(callback) {\n    this.doneCallbacks.push(callback);\n  },\n  fail(callback) {\n    this.failCallbacks.push(callback);\n  },\n};\n\nexport default Deferred;\n","import BaseClass from '../base-class';\nimport global from '../utils/global';\nimport Deferred from '../utils/deferred';\n\nlet YoutubeAPIadded = 0;\nlet loadingYoutubePlayer = 0;\nconst loadingYoutubeDefer = new Deferred();\n\nfunction loadAPI() {\n  if (YoutubeAPIadded) {\n    return;\n  }\n\n  YoutubeAPIadded = true;\n\n  const src = 'https://www.youtube.com/iframe_api';\n\n  if (!src) {\n    return;\n  }\n\n  // add script in head section\n  let tag = document.createElement('script');\n  let head = document.getElementsByTagName('head')[0];\n  tag.src = src;\n\n  head.appendChild(tag);\n\n  head = null;\n  tag = null;\n}\n\nfunction onAPIready(callback) {\n  // Listen for global YT player callback\n  if ((typeof global.YT === 'undefined' || global.YT.loaded === 0) && !loadingYoutubePlayer) {\n    // Prevents Ready event from being called twice\n    loadingYoutubePlayer = 1;\n\n    // Creates deferred so, other players know when to wait.\n    global.onYouTubeIframeAPIReady = function () {\n      global.onYouTubeIframeAPIReady = null;\n      loadingYoutubeDefer.resolve('done');\n      callback();\n    };\n  } else if (typeof global.YT === 'object' && global.YT.loaded === 1) {\n    callback();\n  } else {\n    loadingYoutubeDefer.done(() => {\n      callback();\n    });\n  }\n}\n\nclass VideoWorkerYoutube extends BaseClass {\n  type = 'youtube';\n\n  static parseURL(url) {\n    // eslint-disable-next-line no-useless-escape\n    const regExp = /.*(?:youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|shorts\\/|watch\\?v=)([^#\\&\\?]*).*/;\n    const match = url.match(regExp);\n    return match && match[1].length === 11 ? match[1] : false;\n  }\n\n  init() {\n    super.init();\n\n    loadAPI();\n  }\n\n  play(start) {\n    const self = this;\n    if (!self.player || !self.player.playVideo) {\n      return;\n    }\n\n    if (typeof start !== 'undefined') {\n      self.player.seekTo(start || 0);\n    }\n\n    if (global.YT.PlayerState.PLAYING !== self.player.getPlayerState()) {\n      // Don't play if video is already ended and with no loop.\n      if (self.options.endTime && !self.options.loop) {\n        self.getCurrentTime((seconds) => {\n          if (seconds < self.options.endTime) {\n            self.player.playVideo();\n          }\n        });\n      } else {\n        self.player.playVideo();\n      }\n    }\n  }\n\n  pause() {\n    const self = this;\n    if (!self.player || !self.player.pauseVideo) {\n      return;\n    }\n\n    if (global.YT.PlayerState.PLAYING === self.player.getPlayerState()) {\n      self.player.pauseVideo();\n    }\n  }\n\n  mute() {\n    const self = this;\n    if (!self.player || !self.player.mute) {\n      return;\n    }\n\n    self.player.mute();\n  }\n\n  unmute() {\n    const self = this;\n    if (!self.player || !self.player.unMute) {\n      return;\n    }\n\n    self.player.unMute();\n  }\n\n  setVolume(volume = false) {\n    const self = this;\n    if (!self.player || typeof volume !== 'number' || !self.player.setVolume) {\n      return;\n    }\n\n    self.player.setVolume(volume);\n  }\n\n  getVolume(callback) {\n    const self = this;\n    if (!self.player) {\n      callback(false);\n      return;\n    }\n\n    if (self.player.getVolume) {\n      callback(self.player.getVolume());\n    }\n  }\n\n  getMuted(callback) {\n    const self = this;\n    if (!self.player) {\n      callback(null);\n      return;\n    }\n\n    if (self.player.isMuted) {\n      callback(self.player.isMuted());\n    }\n  }\n\n  setCurrentTime(currentTime = false) {\n    const self = this;\n    if (!self.player || typeof currentTime !== 'number' || !self.player.seekTo) {\n      return;\n    }\n\n    self.player.seekTo(currentTime);\n  }\n\n  getCurrentTime(callback) {\n    const self = this;\n    if (!self.player || !self.player.getCurrentTime) {\n      return;\n    }\n\n    callback(self.player.getCurrentTime());\n  }\n\n  getImageURL(callback) {\n    const self = this;\n\n    if (self.videoImage) {\n      callback(self.videoImage);\n      return;\n    }\n\n    const availableSizes = ['maxresdefault', 'sddefault', 'hqdefault', '0'];\n    let step = 0;\n\n    const tempImg = new Image();\n    tempImg.onload = function () {\n      // if no thumbnail, youtube add their own image with width = 120px\n      if ((this.naturalWidth || this.width) !== 120 || step === availableSizes.length - 1) {\n        // ok\n        self.videoImage = `https://img.youtube.com/vi/${self.videoID}/${availableSizes[step]}.jpg`;\n        callback(self.videoImage);\n      } else {\n        // try another size\n        step += 1;\n        this.src = `https://img.youtube.com/vi/${self.videoID}/${availableSizes[step]}.jpg`;\n      }\n    };\n    tempImg.src = `https://img.youtube.com/vi/${self.videoID}/${availableSizes[step]}.jpg`;\n  }\n\n  getVideo(callback) {\n    const self = this;\n\n    // return generated video block\n    if (self.$video) {\n      callback(self.$video);\n      return;\n    }\n\n    // generate new video block\n    onAPIready(() => {\n      let hiddenDiv;\n      if (!self.$video) {\n        hiddenDiv = document.createElement('div');\n        hiddenDiv.style.display = 'none';\n      }\n\n      self.playerOptions = {\n        // GDPR Compliance.\n        host: 'https://www.youtube-nocookie.com',\n        videoId: self.videoID,\n        playerVars: {\n          autohide: 1,\n          rel: 0,\n          autoplay: 0,\n          // autoplay enable on mobile devices\n          playsinline: 1,\n        },\n      };\n\n      // hide controls\n      if (!self.options.showControls) {\n        self.playerOptions.playerVars.iv_load_policy = 3;\n        self.playerOptions.playerVars.modestbranding = 1;\n        self.playerOptions.playerVars.controls = 0;\n        self.playerOptions.playerVars.showinfo = 0;\n        self.playerOptions.playerVars.disablekb = 1;\n      }\n\n      // events\n      let ytStarted;\n      let ytProgressInterval;\n      self.playerOptions.events = {\n        onReady(e) {\n          // mute\n          if (self.options.mute) {\n            e.target.mute();\n          } else if (typeof self.options.volume === 'number') {\n            e.target.setVolume(self.options.volume);\n          }\n\n          // autoplay\n          if (self.options.autoplay) {\n            self.play(self.options.startTime);\n          }\n          self.fire('ready', e);\n\n          // For seamless loops, set the endTime to 0.1 seconds less than the video's duration\n          // https://github.com/nk-o/video-worker/issues/2\n          if (self.options.loop && !self.options.endTime) {\n            const secondsOffset = 0.1;\n            self.options.endTime = self.player.getDuration() - secondsOffset;\n          }\n\n          // volumechange\n          setInterval(() => {\n            self.getVolume((volume) => {\n              if (self.options.volume !== volume) {\n                self.options.volume = volume;\n                self.fire('volumechange', e);\n              }\n            });\n          }, 150);\n        },\n        onStateChange(e) {\n          // loop\n          if (self.options.loop && e.data === global.YT.PlayerState.ENDED) {\n            self.play(self.options.startTime);\n          }\n          if (!ytStarted && e.data === global.YT.PlayerState.PLAYING) {\n            ytStarted = 1;\n            self.fire('started', e);\n          }\n          if (e.data === global.YT.PlayerState.PLAYING) {\n            self.fire('play', e);\n          }\n          if (e.data === global.YT.PlayerState.PAUSED) {\n            self.fire('pause', e);\n          }\n          if (e.data === global.YT.PlayerState.ENDED) {\n            self.fire('ended', e);\n          }\n\n          // progress check\n          if (e.data === global.YT.PlayerState.PLAYING) {\n            ytProgressInterval = setInterval(() => {\n              self.fire('timeupdate', e);\n\n              // check for end of video and play again or stop\n              if (self.options.endTime && self.player.getCurrentTime() >= self.options.endTime) {\n                if (self.options.loop) {\n                  self.play(self.options.startTime);\n                } else {\n                  self.pause();\n                }\n              }\n            }, 150);\n          } else {\n            clearInterval(ytProgressInterval);\n          }\n        },\n        onError(e) {\n          self.fire('error', e);\n        },\n      };\n\n      const firstInit = !self.$video;\n      if (firstInit) {\n        const div = document.createElement('div');\n        div.setAttribute('id', self.playerID);\n        hiddenDiv.appendChild(div);\n        document.body.appendChild(hiddenDiv);\n      }\n      self.player = self.player || new global.YT.Player(self.playerID, self.playerOptions);\n      if (firstInit) {\n        self.$video = document.getElementById(self.playerID);\n\n        // add accessibility attributes\n        if (self.options.accessibilityHidden) {\n          self.$video.setAttribute('tabindex', '-1');\n          self.$video.setAttribute('aria-hidden', 'true');\n        }\n\n        // get video width and height\n        self.videoWidth = parseInt(self.$video.getAttribute('width'), 10) || 1280;\n        self.videoHeight = parseInt(self.$video.getAttribute('height'), 10) || 720;\n      }\n\n      callback(self.$video);\n    });\n  }\n}\n\nexport default VideoWorkerYoutube;\n","import BaseClass from '../base-class';\nimport global from '../utils/global';\nimport Deferred from '../utils/deferred';\n\nlet VimeoAPIadded = 0;\nlet loadingVimeoPlayer = 0;\nconst loadingVimeoDefer = new Deferred();\n\nfunction loadAPI() {\n  if (VimeoAPIadded) {\n    return;\n  }\n\n  VimeoAPIadded = true;\n\n  // Useful when Vimeo API added using RequireJS https://github.com/nk-o/video-worker/pull/7\n  if (typeof global.Vimeo !== 'undefined') {\n    return;\n  }\n\n  const src = 'https://player.vimeo.com/api/player.js';\n\n  // add script in head section\n  let tag = document.createElement('script');\n  let head = document.getElementsByTagName('head')[0];\n  tag.src = src;\n\n  head.appendChild(tag);\n\n  head = null;\n  tag = null;\n}\n\nfunction onAPIready(callback) {\n  if (typeof global.Vimeo === 'undefined' && !loadingVimeoPlayer) {\n    loadingVimeoPlayer = 1;\n    const vimeoInterval = setInterval(() => {\n      if (typeof global.Vimeo !== 'undefined') {\n        clearInterval(vimeoInterval);\n        loadingVimeoDefer.resolve('done');\n        callback();\n      }\n    }, 20);\n  } else if (typeof global.Vimeo !== 'undefined') {\n    callback();\n  } else {\n    loadingVimeoDefer.done(() => {\n      callback();\n    });\n  }\n}\n\nclass VideoWorkerVimeo extends BaseClass {\n  type = 'vimeo';\n\n  static parseURL(url) {\n    // eslint-disable-next-line no-useless-escape\n    const regExp =\n      /https?:\\/\\/(?:www\\.|player\\.)?vimeo.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/([^/]*)\\/videos\\/|album\\/(\\d+)\\/video\\/|video\\/|)(\\d+)(?:$|\\/|\\?)/;\n    const match = url.match(regExp);\n    return match && match[3] ? match[3] : false;\n  }\n\n  // Try to extract a hash for private videos from the URL.\n  // Thanks to https://github.com/sampotts/plyr\n  static parseURLHash(url) {\n    /* This regex matches a hexadecimal hash if given in any of these forms:\n     *  - [https://player.]vimeo.com/video/{id}/{hash}[?params]\n     *  - [https://player.]vimeo.com/video/{id}?h={hash}[&params]\n     *  - [https://player.]vimeo.com/video/{id}?[params]&h={hash}\n     *  - video/{id}/{hash}\n     * If matched, the hash is available in capture group 4\n     */\n    const regex = /^.*(vimeo.com\\/|video\\/)(\\d+)(\\?.*&*h=|\\/)+([\\d,a-f]+)/;\n    const found = url.match(regex);\n\n    return found && found.length === 5 ? found[4] : null;\n  }\n\n  init() {\n    super.init();\n\n    loadAPI();\n  }\n\n  play(start) {\n    const self = this;\n    if (!self.player) {\n      return;\n    }\n\n    if (typeof start !== 'undefined') {\n      self.player.setCurrentTime(start);\n    }\n\n    self.player.getPaused().then((paused) => {\n      if (paused) {\n        // Don't play if video is already ended and with no loop.\n        if (self.options.endTime && !self.options.loop) {\n          self.getCurrentTime((seconds) => {\n            if (seconds < self.options.endTime) {\n              self.player.play();\n            }\n          });\n        } else {\n          self.player.play();\n        }\n      }\n    });\n  }\n\n  pause() {\n    const self = this;\n    if (!self.player) {\n      return;\n    }\n\n    self.player.getPaused().then((paused) => {\n      if (!paused) {\n        self.player.pause();\n      }\n    });\n  }\n\n  mute() {\n    const self = this;\n    if (!self.player || !self.player.setVolume) {\n      return;\n    }\n\n    self.setVolume(0);\n  }\n\n  unmute() {\n    const self = this;\n    if (!self.player || !self.player.setVolume) {\n      return;\n    }\n\n    // In case the default volume is 0, we have to set 100 when unmute.\n    self.setVolume(self.options.volume || 100);\n  }\n\n  setVolume(volume = false) {\n    const self = this;\n    if (!self.player || typeof volume !== 'number' || !self.player.setVolume) {\n      return;\n    }\n\n    self.player.setVolume(volume / 100);\n  }\n\n  getVolume(callback) {\n    const self = this;\n    if (!self.player) {\n      callback(false);\n      return;\n    }\n\n    if (self.player.getVolume) {\n      self.player.getVolume().then((volume) => {\n        callback(volume * 100);\n      });\n    }\n  }\n\n  getMuted(callback) {\n    const self = this;\n    if (!self.player) {\n      callback(null);\n      return;\n    }\n\n    if (self.player.getVolume) {\n      self.player.getVolume().then((volume) => {\n        callback(!!volume);\n      });\n    }\n  }\n\n  setCurrentTime(currentTime = false) {\n    const self = this;\n    if (!self.player || typeof currentTime !== 'number' || !self.player.setCurrentTime) {\n      return;\n    }\n\n    self.player.setCurrentTime(currentTime);\n  }\n\n  getCurrentTime(callback) {\n    const self = this;\n    if (!self.player || !self.player.getCurrentTime) {\n      return;\n    }\n\n    self.player.getCurrentTime().then((currentTime) => {\n      callback(currentTime);\n    });\n  }\n\n  getImageURL(callback) {\n    const self = this;\n\n    if (self.videoImage) {\n      callback(self.videoImage);\n      return;\n    }\n\n    // We should provide width to get HQ thumbnail URL.\n    let width = global.innerWidth || 1920;\n    if (global.devicePixelRatio) {\n      width *= global.devicePixelRatio;\n    }\n    width = Math.min(width, 1920);\n\n    let request = new XMLHttpRequest();\n    // https://vimeo.com/api/oembed.json?url=https://vimeo.com/235212527\n    request.open('GET', `https://vimeo.com/api/oembed.json?url=${self.url}&width=${width}`, true);\n    request.onreadystatechange = function () {\n      if (this.readyState === 4) {\n        if (this.status >= 200 && this.status < 400) {\n          // Success!\n          const response = JSON.parse(this.responseText);\n\n          if (response.thumbnail_url) {\n            self.videoImage = response.thumbnail_url;\n            callback(self.videoImage);\n          }\n        } else {\n          // Error :(\n        }\n      }\n    };\n    request.send();\n    request = null;\n  }\n\n  getVideo(callback) {\n    const self = this;\n\n    // return generated video block\n    if (self.$video) {\n      callback(self.$video);\n      return;\n    }\n\n    // generate new video block\n    onAPIready(() => {\n      let hiddenDiv;\n      if (!self.$video) {\n        hiddenDiv = document.createElement('div');\n        hiddenDiv.style.display = 'none';\n      }\n\n      self.playerOptions = {\n        // GDPR Compliance.\n        dnt: 1,\n        id: self.videoID,\n        autopause: 0,\n        transparent: 0,\n        autoplay: self.options.autoplay ? 1 : 0,\n        loop: self.options.loop ? 1 : 0,\n        muted: self.options.mute || self.options.volume === 0 ? 1 : 0,\n      };\n\n      // private video hash\n      const urlHash = self.constructor.parseURLHash(self.url);\n      if (urlHash) {\n        self.playerOptions.h = urlHash;\n      }\n\n      // hide controls\n      if (!self.options.showControls) {\n        self.playerOptions.controls = 0;\n      }\n\n      // enable background option\n      if (!self.options.showControls && self.options.loop && self.options.autoplay) {\n        self.playerOptions.background = 1;\n      }\n\n      if (!self.$video) {\n        let playerOptionsString = '';\n        Object.keys(self.playerOptions).forEach((key) => {\n          if (playerOptionsString !== '') {\n            playerOptionsString += '&';\n          }\n          playerOptionsString += `${key}=${encodeURIComponent(self.playerOptions[key])}`;\n        });\n\n        // we need to create iframe manually because when we create it using API\n        // js events won't triggers after iframe moved to another place\n        self.$video = document.createElement('iframe');\n        self.$video.setAttribute('id', self.playerID);\n        self.$video.setAttribute(\n          'src',\n          `https://player.vimeo.com/video/${self.videoID}?${playerOptionsString}`\n        );\n        self.$video.setAttribute('frameborder', '0');\n        self.$video.setAttribute('mozallowfullscreen', '');\n        self.$video.setAttribute('allowfullscreen', '');\n        self.$video.setAttribute('title', 'Vimeo video player');\n\n        // add accessibility attributes\n        if (self.options.accessibilityHidden) {\n          self.$video.setAttribute('tabindex', '-1');\n          self.$video.setAttribute('aria-hidden', 'true');\n        }\n\n        hiddenDiv.appendChild(self.$video);\n        document.body.appendChild(hiddenDiv);\n      }\n      self.player = self.player || new global.Vimeo.Player(self.$video, self.playerOptions);\n\n      // Since Vimeo removed the `volume` parameter, we have to set it manually.\n      if (!self.options.mute && typeof self.options.volume === 'number') {\n        self.setVolume(self.options.volume);\n      }\n\n      // set current time for autoplay\n      if (self.options.startTime && self.options.autoplay) {\n        self.player.setCurrentTime(self.options.startTime);\n      }\n\n      // get video width and height\n      self.player.getVideoWidth().then((width) => {\n        self.videoWidth = width || 1280;\n      });\n      self.player.getVideoHeight().then((height) => {\n        self.videoHeight = height || 720;\n      });\n\n      // events\n      let vmStarted;\n      self.player.on('timeupdate', (e) => {\n        if (!vmStarted) {\n          self.fire('started', e);\n          vmStarted = 1;\n        }\n\n        self.fire('timeupdate', e);\n\n        // check for end of video and play again or stop\n        if (self.options.endTime && e.seconds >= self.options.endTime) {\n          if (self.options.loop) {\n            self.play(self.options.startTime);\n          } else {\n            self.pause();\n          }\n        }\n      });\n      self.player.on('play', (e) => {\n        self.fire('play', e);\n\n        // check for the start time and start with it\n        if (self.options.startTime && e.seconds === 0) {\n          self.play(self.options.startTime);\n        }\n      });\n      self.player.on('pause', (e) => {\n        self.fire('pause', e);\n      });\n      self.player.on('ended', (e) => {\n        self.fire('ended', e);\n      });\n      self.player.on('loaded', (e) => {\n        self.fire('ready', e);\n      });\n      self.player.on('volumechange', (e) => {\n        self.getVolume((volume) => {\n          self.options.volume = volume;\n        });\n        self.fire('volumechange', e);\n      });\n      self.player.on('error', (e) => {\n        self.fire('error', e);\n      });\n\n      callback(self.$video);\n    });\n  }\n}\n\nexport default VideoWorkerVimeo;\n","import BaseClass from '../base-class';\n\nclass VideoWorkerLocal extends BaseClass {\n  type = 'local';\n\n  static parseURL(url) {\n    // eslint-disable-next-line no-useless-escape\n    const videoFormats = url.split(/,(?=mp4\\:|webm\\:|ogv\\:|ogg\\:)/);\n    const result = {};\n    let ready = 0;\n\n    videoFormats.forEach((val) => {\n      // eslint-disable-next-line no-useless-escape\n      const match = val.match(/^(mp4|webm|ogv|ogg)\\:(.*)/);\n      if (match && match[1] && match[2]) {\n        // eslint-disable-next-line prefer-destructuring\n        result[match[1] === 'ogv' ? 'ogg' : match[1]] = match[2];\n        ready = 1;\n      }\n    });\n\n    return ready ? result : false;\n  }\n\n  play(start) {\n    const self = this;\n    if (!self.player) {\n      return;\n    }\n\n    if (typeof start !== 'undefined') {\n      self.player.currentTime = start;\n    }\n\n    if (self.player.paused) {\n      // Don't play if video is already ended and with no loop.\n      if (self.options.endTime && !self.options.loop) {\n        self.getCurrentTime((seconds) => {\n          if (seconds < self.options.endTime) {\n            self.player.play();\n          }\n        });\n      } else {\n        self.player.play();\n      }\n    }\n  }\n\n  pause() {\n    const self = this;\n    if (!self.player || self.player.paused) {\n      return;\n    }\n\n    self.player.pause();\n  }\n\n  mute() {\n    const self = this;\n    if (!self.player) {\n      return;\n    }\n\n    self.$video.muted = true;\n  }\n\n  unmute() {\n    const self = this;\n    if (!self.player) {\n      return;\n    }\n\n    self.$video.muted = false;\n  }\n\n  setVolume(volume = false) {\n    const self = this;\n    if (!self.player || typeof volume !== 'number') {\n      return;\n    }\n\n    self.$video.volume = volume / 100;\n  }\n\n  getVolume(callback) {\n    const self = this;\n    if (!self.player) {\n      callback(false);\n      return;\n    }\n\n    callback(self.$video.volume * 100);\n  }\n\n  getMuted(callback) {\n    const self = this;\n    if (!self.player) {\n      callback(null);\n      return;\n    }\n\n    callback(self.$video.muted);\n  }\n\n  setCurrentTime(currentTime = false) {\n    const self = this;\n    if (!self.player || typeof currentTime !== 'number') {\n      return;\n    }\n\n    self.$video.currentTime = currentTime;\n  }\n\n  getCurrentTime(callback) {\n    const self = this;\n    if (!self.player) {\n      return;\n    }\n\n    callback(self.player.currentTime);\n  }\n\n  getImageURL(callback) {\n    const self = this;\n\n    if (self.videoImage) {\n      callback(self.videoImage);\n    }\n  }\n\n  getVideo(callback) {\n    const self = this;\n\n    // return generated video block\n    if (self.$video) {\n      callback(self.$video);\n      return;\n    }\n\n    // generate new video block\n    let hiddenDiv;\n    if (!self.$video) {\n      hiddenDiv = document.createElement('div');\n      hiddenDiv.style.display = 'none';\n    }\n\n    function addSourceElement(element, src, type) {\n      const source = document.createElement('source');\n      source.src = src;\n      source.type = type;\n      element.appendChild(source);\n    }\n\n    if (!self.$video) {\n      self.$video = document.createElement('video');\n      self.player = self.$video;\n\n      // show controls\n      if (self.options.showControls) {\n        self.$video.controls = true;\n      }\n\n      // set volume\n      if (typeof self.options.volume === 'number') {\n        self.setVolume(self.options.volume);\n      }\n\n      // mute (it is required to mute after the volume set)\n      if (self.options.mute) {\n        self.mute();\n      }\n\n      // loop\n      if (self.options.loop) {\n        self.$video.loop = true;\n      }\n\n      // autoplay enable on mobile devices\n      self.$video.setAttribute('playsinline', '');\n      self.$video.setAttribute('webkit-playsinline', '');\n\n      // add accessibility attributes\n      if (self.options.accessibilityHidden) {\n        self.$video.setAttribute('tabindex', '-1');\n        self.$video.setAttribute('aria-hidden', 'true');\n      }\n\n      self.$video.setAttribute('id', self.playerID);\n      hiddenDiv.appendChild(self.$video);\n      document.body.appendChild(hiddenDiv);\n\n      Object.keys(self.videoID).forEach((key) => {\n        addSourceElement(self.$video, self.videoID[key], `video/${key}`);\n      });\n    }\n\n    let locStarted;\n    self.player.addEventListener('playing', (e) => {\n      if (!locStarted) {\n        self.fire('started', e);\n      }\n      locStarted = 1;\n    });\n    self.player.addEventListener('timeupdate', function (e) {\n      self.fire('timeupdate', e);\n\n      // check for end of video and play again or stop\n      if (self.options.endTime && this.currentTime >= self.options.endTime) {\n        if (self.options.loop) {\n          self.play(self.options.startTime);\n        } else {\n          self.pause();\n        }\n      }\n    });\n    self.player.addEventListener('play', (e) => {\n      self.fire('play', e);\n    });\n    self.player.addEventListener('pause', (e) => {\n      self.fire('pause', e);\n    });\n    self.player.addEventListener('ended', (e) => {\n      self.fire('ended', e);\n    });\n    self.player.addEventListener('loadedmetadata', function () {\n      // get video width and height\n      self.videoWidth = this.videoWidth || 1280;\n      self.videoHeight = this.videoHeight || 720;\n\n      self.fire('ready');\n\n      // autoplay\n      if (self.options.autoplay) {\n        self.play(self.options.startTime);\n      }\n    });\n    self.player.addEventListener('volumechange', (e) => {\n      self.getVolume((volume) => {\n        self.options.volume = volume;\n      });\n      self.fire('volumechange', e);\n    });\n    self.player.addEventListener('error', (e) => {\n      self.fire('error', e);\n    });\n\n    callback(self.$video);\n  }\n}\n\nexport default VideoWorkerLocal;\n","import VideoWorkerBase from './base-class';\nimport VideoWorkerYoutube from './providers/youtube';\nimport VideoWorkerVimeo from './providers/vimeo';\nimport VideoWorkerLocal from './providers/local';\n\nfunction VideoWorker(url, options) {\n  let result = false;\n\n  Object.keys(VideoWorker.providers).forEach((key) => {\n    if (!result && VideoWorker.providers[key].parseURL(url)) {\n      result = new VideoWorker.providers[key](url, options);\n    }\n  });\n\n  return result || new VideoWorkerBase(url, options);\n}\n\nVideoWorker.BaseClass = VideoWorkerBase;\nVideoWorker.providers = {\n  Youtube: VideoWorkerYoutube,\n  Vimeo: VideoWorkerVimeo,\n  Local: VideoWorkerLocal,\n};\n\nexport default VideoWorker;\n"],"names":["autoplay","loop","mute","volume","showControls","accessibilityHidden","startTime","endTime","extend","out","args","Object","keys","forEach","i","key","ID","VideoWorkerBase","type","constructor","url","options","self","options_default","defaults","videoID","parseURL","init","isValid","playerID","on","name","callback","userEventsList","push","off","val","fire","apply","play","start","pause","unmute","setVolume","getVolume","getMuted","setCurrentTime","currentTime","getCurrentTime","getImageURL","getVideo","win","window","global","Deferred","doneCallbacks","failCallbacks","prototype","execute","list","length","Array","slice","call","resolve","reject","done","fail","YoutubeAPIadded","loadingYoutubePlayer","loadingYoutubeDefer","loadAPI","src","tag","document","createElement","head","getElementsByTagName","appendChild","onAPIready","YT","loaded","onYouTubeIframeAPIReady","VideoWorkerYoutube","BaseClass","regExp","match","player","playVideo","seekTo","PlayerState","PLAYING","getPlayerState","seconds","pauseVideo","unMute","isMuted","videoImage","availableSizes","step","tempImg","Image","onload","naturalWidth","width","$video","hiddenDiv","style","display","playerOptions","host","videoId","playerVars","autohide","rel","playsinline","iv_load_policy","modestbranding","controls","showinfo","disablekb","ytStarted","ytProgressInterval","events","onReady","e","target","secondsOffset","getDuration","setInterval","onStateChange","data","ENDED","PAUSED","clearInterval","onError","firstInit","div","setAttribute","body","Player","getElementById","videoWidth","parseInt","getAttribute","videoHeight","VimeoAPIadded","loadingVimeoPlayer","loadingVimeoDefer","Vimeo","vimeoInterval","VideoWorkerVimeo","parseURLHash","regex","found","getPaused","then","paused","innerWidth","devicePixelRatio","Math","min","request","XMLHttpRequest","open","onreadystatechange","readyState","status","response","JSON","parse","responseText","thumbnail_url","send","dnt","id","autopause","transparent","muted","urlHash","h","background","playerOptionsString","encodeURIComponent","getVideoWidth","getVideoHeight","height","vmStarted","VideoWorkerLocal","videoFormats","split","result","ready","addSourceElement","element","source","locStarted","addEventListener","VideoWorker","providers","Youtube","Local"],"mappings":"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"}
/*!
 * Name    : Video Worker
 * Version : 1.1.14
 * Author  : nK <https://nkdev.info>
 * GitHub  : https://github.com/nk-o/video-worker
 */!function(o){var i={};function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return o[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}n.m=o,n.c=i,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,o){e.exports=o(1)},function(e,t,o){"use strict";o.r(t);t=o(2),t=o.n(t),o=o(4);t.a.VideoWorker=o.default},function(t,e,o){!function(e){e="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};t.exports=e}.call(this,o(3))},function(e,t){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":o(window))&&(i=window)}e.exports=i},function(e,t,o){"use strict";o.r(t),o.d(t,"default",function(){return v});var t=o(2),p=o.n(t);function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(){this.doneCallbacks=[],this.failCallbacks=[]}i.prototype={execute:function(e,t){var o=e.length;for(t=Array.prototype.slice.call(t);o;)e[--o].apply(null,t)},resolve:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];this.execute(this.doneCallbacks,t)},reject:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];this.execute(this.failCallbacks,t)},done:function(e){this.doneCallbacks.push(e)},fail:function(e){this.failCallbacks.push(e)}};var r=0,l=0,u=0,s=0,d=0,y=new i,c=new i,v=function(){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var o=this;o.url=e,o.options_default={autoplay:!1,loop:!1,mute:!1,volume:100,showControls:!0,accessibilityHidden:!1,startTime:0,endTime:0},o.options=o.extend({},o.options_default,t),void 0!==o.options.showContols&&(o.options.showControls=o.options.showContols,delete o.options.showContols),o.videoID=o.parseURL(e),o.videoID&&(o.ID=r,r+=1,o.loadAPI(),o.init())}var e,t,o;return e=i,(t=[{key:"extend",value:function(){for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];var i=o[0]||{};return Object.keys(o).forEach(function(t){o[t]&&Object.keys(o[t]).forEach(function(e){i[e]=o[t][e]})}),i}},{key:"parseURL",value:function(e){var t,o,i,n,a,r=!(!(t=(t=e).match(/.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/))||11!==t[1].length)&&t[1],l=!(!(o=(o=e).match(/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/))||!o[3])&&o[3],u=(i=e,i=e.split(/,(?=mp4\:|webm\:|ogv\:|ogg\:)/),n={},a=0,i.forEach(function(e){e=e.match(/^(mp4|webm|ogv|ogg)\:(.*)/);e&&e[1]&&e[2]&&(n["ogv"===e[1]?"ogg":e[1]]=e[2],a=1)}),!!a&&n);return r?(this.type="youtube",r):l?(this.type="vimeo",l):!!u&&(this.type="local",u)}},{key:"isValid",value:function(){return!!this.videoID}},{key:"on",value:function(e,t){this.userEventsList=this.userEventsList||[],(this.userEventsList[e]||(this.userEventsList[e]=[])).push(t)}},{key:"off",value:function(o,i){var n=this;this.userEventsList&&this.userEventsList[o]&&(i?this.userEventsList[o].forEach(function(e,t){e===i&&(n.userEventsList[o][t]=!1)}):delete this.userEventsList[o])}},{key:"fire",value:function(e){for(var t=this,o=arguments.length,i=new Array(1<o?o-1:0),n=1;n<o;n++)i[n-1]=arguments[n];this.userEventsList&&void 0!==this.userEventsList[e]&&this.userEventsList[e].forEach(function(e){e&&e.apply(t,i)})}},{key:"play",value:function(e){var t=this;t.player&&("youtube"===t.type&&t.player.playVideo&&(void 0!==e&&t.player.seekTo(e||0),p.a.YT.PlayerState.PLAYING!==t.player.getPlayerState()&&t.player.playVideo()),"vimeo"===t.type&&(void 0!==e&&t.player.setCurrentTime(e),t.player.getPaused().then(function(e){e&&t.player.play()})),"local"===t.type&&(void 0!==e&&(t.player.currentTime=e),t.player.paused&&t.player.play()))}},{key:"pause",value:function(){var t=this;t.player&&("youtube"===t.type&&t.player.pauseVideo&&p.a.YT.PlayerState.PLAYING===t.player.getPlayerState()&&t.player.pauseVideo(),"vimeo"===t.type&&t.player.getPaused().then(function(e){e||t.player.pause()}),"local"===t.type&&(t.player.paused||t.player.pause()))}},{key:"mute",value:function(){var e=this;e.player&&("youtube"===e.type&&e.player.mute&&e.player.mute(),"vimeo"===e.type&&e.player.setVolume&&e.player.setVolume(0),"local"===e.type&&(e.$video.muted=!0))}},{key:"unmute",value:function(){var e=this;e.player&&("youtube"===e.type&&e.player.mute&&e.player.unMute(),"vimeo"===e.type&&e.player.setVolume&&e.player.setVolume(e.options.volume),"local"===e.type&&(e.$video.muted=!1))}},{key:"setVolume",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this;t.player&&e&&("youtube"===t.type&&t.player.setVolume&&t.player.setVolume(e),"vimeo"===t.type&&t.player.setVolume&&t.player.setVolume(e),"local"===t.type&&(t.$video.volume=e/100))}},{key:"getVolume",value:function(t){var e=this;e.player?("youtube"===e.type&&e.player.getVolume&&t(e.player.getVolume()),"vimeo"===e.type&&e.player.getVolume&&e.player.getVolume().then(function(e){t(e)}),"local"===e.type&&t(100*e.$video.volume)):t(!1)}},{key:"getMuted",value:function(t){var e=this;e.player?("youtube"===e.type&&e.player.isMuted&&t(e.player.isMuted()),"vimeo"===e.type&&e.player.getVolume&&e.player.getVolume().then(function(e){t(!!e)}),"local"===e.type&&t(e.$video.muted)):t(null)}},{key:"getImageURL",value:function(t){var e,o,i,n=this;n.videoImage?t(n.videoImage):("youtube"===n.type&&(e=["maxresdefault","sddefault","hqdefault","0"],o=0,(i=new Image).onload=function(){120!==(this.naturalWidth||this.width)||o===e.length-1?(n.videoImage="https://img.youtube.com/vi/".concat(n.videoID,"/").concat(e[o],".jpg"),t(n.videoImage)):(o+=1,this.src="https://img.youtube.com/vi/".concat(n.videoID,"/").concat(e[o],".jpg"))},i.src="https://img.youtube.com/vi/".concat(n.videoID,"/").concat(e[o],".jpg")),"vimeo"===n.type&&((i=new XMLHttpRequest).open("GET","https://vimeo.com/api/v2/video/".concat(n.videoID,".json"),!0),i.onreadystatechange=function(){var e;4===this.readyState&&200<=this.status&&this.status<400&&(e=JSON.parse(this.responseText),n.videoImage=e[0].thumbnail_large,t(n.videoImage))},i.send(),i=null))}},{key:"getIframe",value:function(e){this.getVideo(e)}},{key:"getVideo",value:function(u){var s=this;s.$video?u(s.$video):s.onAPIready(function(){var e,t,o,i,n,a,r,l;s.$video||((e=document.createElement("div")).style.display="none"),"youtube"===s.type&&(s.playerOptions={host:"https://www.youtube-nocookie.com",videoId:s.videoID,playerVars:{autohide:1,rel:0,autoplay:0,playsinline:1}},s.options.showControls||(s.playerOptions.playerVars.iv_load_policy=3,s.playerOptions.playerVars.modestbranding=1,s.playerOptions.playerVars.controls=0,s.playerOptions.playerVars.showinfo=0,s.playerOptions.playerVars.disablekb=1),s.playerOptions.events={onReady:function(t){s.options.mute?t.target.mute():s.options.volume&&t.target.setVolume(s.options.volume),s.options.autoplay&&s.play(s.options.startTime),s.fire("ready",t),s.options.loop&&!s.options.endTime&&(s.options.endTime=s.player.getDuration()-.1),setInterval(function(){s.getVolume(function(e){s.options.volume!==e&&(s.options.volume=e,s.fire("volumechange",t))})},150)},onStateChange:function(e){s.options.loop&&e.data===p.a.YT.PlayerState.ENDED&&s.play(s.options.startTime),t||e.data!==p.a.YT.PlayerState.PLAYING||(t=1,s.fire("started",e)),e.data===p.a.YT.PlayerState.PLAYING&&s.fire("play",e),e.data===p.a.YT.PlayerState.PAUSED&&s.fire("pause",e),e.data===p.a.YT.PlayerState.ENDED&&s.fire("ended",e),e.data===p.a.YT.PlayerState.PLAYING?o=setInterval(function(){s.fire("timeupdate",e),s.options.endTime&&s.player.getCurrentTime()>=s.options.endTime&&(s.options.loop?s.play(s.options.startTime):s.pause())},150):clearInterval(o)},onError:function(e){s.fire("error",e)}},(i=!s.$video)&&((n=document.createElement("div")).setAttribute("id",s.playerID),e.appendChild(n),document.body.appendChild(e)),s.player=s.player||new p.a.YT.Player(s.playerID,s.playerOptions),i&&(s.$video=document.getElementById(s.playerID),s.options.accessibilityHidden&&(s.$video.setAttribute("tabindex","-1"),s.$video.setAttribute("aria-hidden","true")),s.videoWidth=parseInt(s.$video.getAttribute("width"),10)||1280,s.videoHeight=parseInt(s.$video.getAttribute("height"),10)||720)),"vimeo"===s.type&&(s.playerOptions={dnt:1,id:s.videoID,autopause:0,transparent:0,autoplay:s.options.autoplay?1:0,loop:s.options.loop?1:0,muted:s.options.mute?1:0},s.options.volume&&(s.playerOptions.volume=s.options.volume),s.options.showControls||(s.playerOptions.badge=0,s.playerOptions.byline=0,s.playerOptions.portrait=0,s.playerOptions.title=0,s.playerOptions.background=1),s.$video||(a="",Object.keys(s.playerOptions).forEach(function(e){""!==a&&(a+="&"),a+="".concat(e,"=").concat(encodeURIComponent(s.playerOptions[e]))}),s.$video=document.createElement("iframe"),s.$video.setAttribute("id",s.playerID),s.$video.setAttribute("src","https://player.vimeo.com/video/".concat(s.videoID,"?").concat(a)),s.$video.setAttribute("frameborder","0"),s.$video.setAttribute("mozallowfullscreen",""),s.$video.setAttribute("allowfullscreen",""),s.$video.setAttribute("title","Vimeo video player"),s.options.accessibilityHidden&&(s.$video.setAttribute("tabindex","-1"),s.$video.setAttribute("aria-hidden","true")),e.appendChild(s.$video),document.body.appendChild(e)),s.player=s.player||new p.a.Vimeo.Player(s.$video,s.playerOptions),s.options.startTime&&s.options.autoplay&&s.player.setCurrentTime(s.options.startTime),s.player.getVideoWidth().then(function(e){s.videoWidth=e||1280}),s.player.getVideoHeight().then(function(e){s.videoHeight=e||720}),s.player.on("timeupdate",function(e){r||(s.fire("started",e),r=1),s.fire("timeupdate",e),s.options.endTime&&s.options.endTime&&e.seconds>=s.options.endTime&&(s.options.loop?s.play(s.options.startTime):s.pause())}),s.player.on("play",function(e){s.fire("play",e),s.options.startTime&&0===e.seconds&&s.play(s.options.startTime)}),s.player.on("pause",function(e){s.fire("pause",e)}),s.player.on("ended",function(e){s.fire("ended",e)}),s.player.on("loaded",function(e){s.fire("ready",e)}),s.player.on("volumechange",function(e){s.fire("volumechange",e)}),s.player.on("error",function(e){s.fire("error",e)})),"local"===s.type&&(s.$video||(s.$video=document.createElement("video"),s.options.showControls&&(s.$video.controls=!0),s.options.mute?s.$video.muted=!0:s.$video.volume&&(s.$video.volume=s.options.volume/100),s.options.loop&&(s.$video.loop=!0),s.$video.setAttribute("playsinline",""),s.$video.setAttribute("webkit-playsinline",""),s.options.accessibilityHidden&&(s.$video.setAttribute("tabindex","-1"),s.$video.setAttribute("aria-hidden","true")),s.$video.setAttribute("id",s.playerID),e.appendChild(s.$video),document.body.appendChild(e),Object.keys(s.videoID).forEach(function(e){var t,o,i;t=s.$video,o=s.videoID[e],i="video/".concat(e),(e=document.createElement("source")).src=o,e.type=i,t.appendChild(e)})),s.player=s.player||s.$video,s.player.addEventListener("playing",function(e){l||s.fire("started",e),l=1}),s.player.addEventListener("timeupdate",function(e){s.fire("timeupdate",e),s.options.endTime&&s.options.endTime&&this.currentTime>=s.options.endTime&&(s.options.loop?s.play(s.options.startTime):s.pause())}),s.player.addEventListener("play",function(e){s.fire("play",e)}),s.player.addEventListener("pause",function(e){s.fire("pause",e)}),s.player.addEventListener("ended",function(e){s.fire("ended",e)}),s.player.addEventListener("loadedmetadata",function(){s.videoWidth=this.videoWidth||1280,s.videoHeight=this.videoHeight||720,s.fire("ready"),s.options.autoplay&&s.play(s.options.startTime)}),s.player.addEventListener("volumechange",function(e){s.getVolume(function(e){s.options.volume=e}),s.fire("volumechange",e)}),s.player.addEventListener("error",function(e){s.fire("error",e)})),u(s.$video)})}},{key:"init",value:function(){this.playerID="VideoWorker-".concat(this.ID)}},{key:"loadAPI",value:function(){if(!l||!u){var e,t,o="";if("youtube"!==this.type||l||(l=1,o="https://www.youtube.com/iframe_api"),"vimeo"===this.type&&!u){if(u=1,void 0!==p.a.Vimeo)return;o="https://player.vimeo.com/api/player.js"}o&&(e=document.createElement("script"),t=document.getElementsByTagName("head")[0],e.src=o,t.appendChild(e),e=t=null)}}},{key:"onAPIready",value:function(e){var t;"youtube"===this.type&&(void 0!==p.a.YT&&0!==p.a.YT.loaded||s?"object"===n(p.a.YT)&&1===p.a.YT.loaded?e():y.done(function(){e()}):(s=1,window.onYouTubeIframeAPIReady=function(){window.onYouTubeIframeAPIReady=null,y.resolve("done"),e()})),"vimeo"===this.type&&(void 0!==p.a.Vimeo||d?void 0!==p.a.Vimeo?e():c.done(function(){e()}):(d=1,t=setInterval(function(){void 0!==p.a.Vimeo&&(clearInterval(t),c.resolve("done"),e())},20))),"local"===this.type&&e()}}])&&a(e.prototype,t),o&&a(e,o),i}()}]);
//# sourceMappingURL=video-worker.min.js.map
